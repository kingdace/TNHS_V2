;/*FB_PKG_DELIM*/

__d("LSStoryContactSyncFromBucket",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.filter(t.db.table(7).fetch(),function(e){return!0}),function(e){var t=e.update,n=e.item;return t({profileRingColor:void 0,profileRingState:void 0})})},function(e){return t.forEach(t.filter(t.db.table(53).fetch(),function(e){return t.i64.eq(e.bucketType,t.i64.cast([0,1]))||t.i64.eq(e.bucketType,t.i64.cast([0,12]))}),function(e){var r=e.item;return n[1]=r.readState,t.i64.eq(n[1],t.i64.cast([0,1]))?n[0]=t.i64.cast([0,39423]):(t.i64.eq(n[1],t.i64.cast([0,2]))?n[2]=t.i64.cast([0,14342874]):n[2]=void 0,n[0]=n[2]),t.forEach(t.filter(t.db.table(7).fetch([[[r.ownerId]]]),function(e){return t.i64.eq(e.id,r.ownerId)&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}),function(e){var t=e.update,r=e.item;return t({profileRingState:n[1],profileRingColor:n[0]})})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesStoryContactSyncFromBucketStoredProcedure",e.__tables__=["contacts","story_buckets"],a.exports=e}),null);