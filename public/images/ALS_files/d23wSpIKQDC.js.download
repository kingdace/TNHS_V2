;/*FB_PKG_DELIM*/

__d("LSSetLoadingAfterOnMessageRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sortBy(t.db.table(13).fetch([[[e[0]]]]),[["maxTimestampMs","DESC"]]).next().then(function(e,n){var r=e.done,o=e.value;return r?0:(n=o.item,t.forEach(t.filter(t.db.table(13).fetch([[[n.threadKey,n.minTimestampMs,n.minMessageId]]]),function(e){return t.i64.eq(e.threadKey,n.threadKey)&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.minTimestampMs,n.minTimestampMs)&&e.minMessageId===n.minMessageId}),function(e){var t=e.update,n=e.item;return t({isLoadingAfter:!0})}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetLoadingAfterOnMessageRangesStoredProcedure",e.__tables__=["messages_ranges_v2__generated"],a.exports=e}),null);
__d("LSReportThreadViewOpen",["LSIssueNewTaskWithExtraOperations","LSSetLoadingAfterOnMessageRanges"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[0]=n[0],r[1]=n[1],n):(t=i.item,o=[t.syncGroup,t.threadType],r[0]=o[0],r[1]=o[1])})},function(e){return t.i64.neq(r[0],void 0)?t.sequence([function(e){return t.db.table(1).fetch([[[r[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=void 0:(t=o.item,r[14]=t.syncParams)})},function(e){return r[3]=r[14]}]):t.resolve(r[3]=void 0)},function(n){return t.islc(t.db.table(12).fetch([[[e[0],t.i64.cast([0,80])]],"messageDisplayOrderAuthority"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,t){var n=e.done,o=e.value;return n?r[4]=void 0:(t=o.item,r[4]=t.timestampMs)})},function(n){return t.db.table(294).fetch([[[e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[!1,t.i64.cast([0,0]),void 0],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.isStale,n.threadQueueSequenceId,n.lastSelectiveSyncTimestampMs],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return r[6]?r[10]=!0:r[10]=!1,t.i64.neq(r[8],void 0)&&(t.i64.eq(r[1],t.i64.cast([0,152]))?r[14]=t.i64.cast([0,0]):r[14]=t.i64.cast([0,0]),r[15]=t.i64.of_float(Date.now())),t.resolve()},function(o){return r[11]=new t.Map,r[11].set("thread_key",e[0]),r[11].set("is_stale",r[10]),r[11].set("client_seq_id",r[7]),r[11].set("sync_params_encoded",r[3]),r[11].set("client_last_sync_timestamp_ms",r[8]),r[11].set("sync_group",r[0]),r[11].set("last_message_timestamp_ms",r[4]),r[12]=r[11].get("thread_key"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),["report_thread_view_open","_",t.i64.to_string(r[12])].join(""),t.i64.cast([0,605]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReportThreadViewOpenStoredProcedure",e.__tables__=["threads","sync_groups","messages","community_thread_sync_info"],a.exports=e}),null);
__d("LSReportThreadViewOpenStoredProcedure",["LSReportThreadViewOpen","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSReportThreadViewOpen"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSLogger",["I64","Promise","ReQL","ReQLSuspense","qpl","react","react-compiler-runtime","useCometInteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useCallback,m=c.useEffect;function p(){var t=o("react-compiler-runtime").c(5),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("qpl")._(30605384,"573"),t[0]=a):a=t[0];var i=r("useCometInteractionTracing")(a,"fast","INTERACTION",void 0),l;t[1]!==i?(l=function(){return new(e||(e=n("Promise")))(function(e){i(e)})},t[1]=i,t[2]=l):l=t[2];var s=l,u;return t[3]!==s?(u={traceLocalSendMessageAsync:s},t[3]=s,t[4]=u):u=t[4],u}function _(e,t){var n=o("react-compiler-runtime").c(19),r;n[0]!==e.tables.messages||n[1]!==t.threadKey?(r=function(){return o("ReQL").fromTableDescending(e.tables.messages).getKeyRange(t.threadKey)},n[0]=e.tables.messages,n[1]=t.threadKey,n[2]=r):r=n[2];var a;n[3]!==e||n[4]!==t?(a=[e,t],n[3]=e,n[4]=t,n[5]=a):a=n[5];var l=o("ReQLSuspense").useFirst(r,a,i.id+":45"),s;n[6]!==e.tables.attachments||n[7]!==l||n[8]!==t.threadKey?(s=function(){return l!=null?o("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(t.threadKey,l.messageId):o("ReQL").empty()},n[6]=e.tables.attachments,n[7]=l,n[8]=t.threadKey,n[9]=s):s=n[9];var u;n[10]!==e||n[11]!==l||n[12]!==t?(u=[e,l,t],n[10]=e,n[11]=l,n[12]=t,n[13]=u):u=n[13];var c=o("ReQLSuspense").useArray(s,u,i.id+":50"),d;n[14]!==c?(d=function(){var e,t=c.map(g).sort(f);if(t!=null){var n=(e=t[0])==null?void 0:e.offlineAttachmentId;n!=null}},n[14]=c,n[15]=d):d=n[15];var p;n[16]!==c||n[17]!==t?(p=[c,t],n[16]=c,n[17]=t,n[18]=p):p=n[18],m(d,p)}function f(e,t){return(s||(s=o("I64"))).compare(e.attachmentIndex,t.attachmentIndex)}function g(e){return e}l.useLSSLogger=p,l.useCancelLSSForChatHead=_}),98);
__d("LSThreadPointQueryTTRCStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({COMPLETED:1,SKIPPED:2});i.default=e}),66);
__d("MWChatComposerMentionsUtils",["remove-accents"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t.length===0)return!0;var n=r("remove-accents")(t).toLowerCase(),o=r("remove-accents")(e).toLowerCase();return o.split(" ").some(function(e){return e.startsWith(n)})||o.startsWith(n)}l.doesParticipantNameMatch=e}),98);
__d("MWChatComposerTypeaheadUtil",["fbt","ix","I64","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MWChatComposerMentionsUtils","MWXIconGroup","gkx","qex"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=s._(/*BTDS*/"Meta AI").toString(),m=s._(/*BTDS*/"Ask questions").toString(),p=s._(/*BTDS*/"everyone").toString(),_=r("gkx")("20836"),f={decorType:"regular",handle:d,key:"0",label:d,rawData:{image:u("405460"),subtitle:m},type:"entry"};function g(t,n,a,i,l,u,m,g){var h=t.query,y=g!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&o("LSMessagingThreadTypeUtil").isGroup(g),C=g!=null&&!o("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&o("LSMessagingThreadTypeUtil").isGroup(g),b=C&&r("qex")._("1303")===!0,v=[],S=[];if(l===!0&&o("MWChatComposerMentionsUtils").doesParticipantNameMatch(d,h)&&v.push(f),l!==!0||u){if(n.forEach(function(t){var n=t.actualName,a=t.blockedByViewerStatus,i=t.contactId,l=t.nickname,s=t.profilePictureUrl,u=t.secondaryName;if(!(a!=null&&!(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)))){var d=null;if(u!=null&&o("MWChatComposerMentionsUtils").doesParticipantNameMatch(u,h)?d="secondaryName":o("MWChatComposerMentionsUtils").doesParticipantNameMatch(n,h)?d="name":l!=null&&o("MWChatComposerMentionsUtils").doesParticipantNameMatch(l,h)&&(d="nickname"),d!=null&&s!=null){var m=u;y?m=l!=null?l:n:m==null&&(m=u!=null?u:d==="nickname"&&l!=null?l:n),v.push({decorType:"regular",handle:m,key:i+" "+d,label:n,rawData:{photoURI:s,source:d,subtitle:u!=null?u:l},type:"entry"})}}}),o("MWChatComposerMentionsUtils").doesParticipantNameMatch(p,h)&&(_||y||b)){var R=s._(/*BTDS*/"Mention everyone in this chat").toString();S.push({decorType:"regular",handle:p,key:""+a,label:p,rawData:{icon:r("MWXIconGroup"),source:"all",subtitle:R},type:"entry"})}if(_){var L=s._(/*BTDS*/"here").toString();if(o("MWChatComposerMentionsUtils").doesParticipantNameMatch(L,h)){var E=s._(/*BTDS*/"Mention everyone in this chat who is active").toString();S.push({decorType:"regular",handle:L,key:a+"-active",label:L,rawData:{icon:r("MWXIconGroup"),source:"all",subtitle:E},type:"entry"})}}}var k=y||b?[].concat(v.slice(0,m),S):[].concat(v,S).slice(0,m);return k.length<m&&i&&i(h,m-k.length),{entries:k,params:t}}function h(e){switch(e){case d:return"ai";case p:return"t";default:return"p"}}l.aiBotMentionsEntry=f,l.fetchCacheComposerMentionsTypeahead=g,l.commandToRangeType=h}),226);
__d("MessengerLexicalEntityTextNode",["FBLogger","Lexical"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getEntity=function(){throw r("FBLogger")("messenger_comet").mustfixThrow("CometMessengerLexicalEntityTextNode does not implement getEntity")},t})(o("Lexical").TextNode);function s(t){return t instanceof e}l.MessengerLexicalEntityTextNode=e,l.isMessengerLexicalEntityTextNode=s}),98);
__d("MessengerLexicalActorNode",["MWChatComposerTypeaheadUtil","MessengerLexicalEntityTextNode"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.replace(" name","");return t=t.replace(" nickname",""),t=t.replace(" secondaryName",""),t}var s=(function(t){function n(n,r){var o,a=n.id,i=n.prefix,l=i===void 0?"@":i,s=n.text;return o=t.call(this,d(s,l),r)||this,o.__contactID=e(a),o.__prefix=l,o}babelHelpers.inheritsLoose(n,t),n.getType=function(){return"actor"},n.clone=function(t){return new n({id:t.__contactID,prefix:t.__prefix,text:m(t.__text,t.__prefix)},t.__key)},n.importJSON=function(t){return u({id:t.id,prefix:t.prefix,text:t.text})};var r=n.prototype;return r.exportJSON=function(){return babelHelpers.extends({},t.prototype.exportJSON.call(this),{id:this.__contactID,prefix:this.__prefix,text:m(this.__text,this.__prefix),type:"actor"})},r.createDOM=function(n){var e=t.prototype.createDOM.call(this,n);return e.className="xv78j7m xt0e3qv x3jgonx",e.spellcheck=!1,e},r.getEntity=function(){return{id:this.__contactID,isWeak:!1}},r.getRangeType=function(){return o("MWChatComposerTypeaheadUtil").commandToRangeType(m(this.__text,this.__prefix))},n})(o("MessengerLexicalEntityTextNode").MessengerLexicalEntityTextNode);function u(e,t){return t===void 0&&(t="segmented"),new s(e).setMode(t).toggleDirectionless()}function c(e){return e instanceof s}function d(e,t){return e.startsWith(t)?e:""+t+e}function m(e,t){return e.startsWith(t)?e.slice(t.length):e}l.MessengerLexicalActorNode=s,l.$createMessengerLexicalActorNode=u,l.$isMessengerLexicalActorNode=c}),98);
__d("MAWSecureComposerText",["Lexical","LexicalText","MAWJids","MessengerLexicalActorNode","MessengerLexicalEntityTextNode"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.read(function(){var e=o("Lexical").$getRoot().getFirstChild();return e instanceof o("Lexical").ElementNode?e.getChildren().reduce(function(e,t){var n=o("MessengerLexicalActorNode").$isMessengerLexicalActorNode(t)&&t.getRangeType()==="t";if(o("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(t)&&!n){var r=t.getEntity();return e+("@"+o("MAWJids").toUserJid(r.id))}return e+t.getTextContent()},""):o("LexicalText").$rootTextContent()})}l.getTextFromEditorState=e}),98);
__d("MWCMInboxHeaderCommunityGroupName.react",["fbt","CometPageletWithDiv.react","MWCMThreadTypes.react","Promise","react","react-compiler-runtime","useCommunityFolder","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(e){return e}function m(t){var a=o("react-compiler-runtime").c(11),i=t.renderWrapper,l=t.thread;r("vulture")("52GbUbpFuYPt09_N13gpog-d0Ow=");var u=i!=null?i:d,m=r("useCommunityFolder")(l);if(m==null)throw(e||(e=n("Promise"))).resolve();var p=l.cannotReplyReason==="broadcast_chat_read_only",_;a[0]!==p||a[1]!==l.threadType?(_=o("MWCMThreadTypes.react").isBroadcastThread(l.threadType)&&!p?s._(/*BTDS*/"Broadcast"):o("MWCMThreadTypes.react").isPrivateThread(l.threadType)?s._(/*BTDS*/"Invite only"):null,a[0]=p,a[1]=l.threadType,a[2]=_):_=a[2];var f=_,g;a[3]!==f||a[4]!==m.name||a[5]!==p||a[6]!==l.threadType?(g=o("MWCMThreadTypes.react").isBroadcastThread(l.threadType)&&!p?c.jsxs(c.Fragment,{children:[f," ",f!=null?"\u2022":null," ",m.name]}):c.jsxs(c.Fragment,{children:[m.name," ",f!=null?"\u2022":null," ",f]}),a[3]=f,a[4]=m.name,a[5]=p,a[6]=l.threadType,a[7]=g):g=a[7];var h;return a[8]!==u||a[9]!==g?(h=u(g),a[8]=u,a[9]=g,a[10]=h):h=a[10],h}function p(e){return c.jsx(o("CometPageletWithDiv.react").Placeholder,{className:"x193iq5w",fallback:null,name:"MWCMInboxHeaderCommunityGroupName",children:c.jsx(m,babelHelpers.extends({},e))})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("MWCMSelectiveSyncTTRCQPLLoggingUtils",["I64","QPLUserFlow","ReQL","ReQLSuspense","qpl","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["text"],s=["text"],u,c,d=r("qpl")._(25310806,"1365");function m(e){var t,n=(c||(c=r("useReStore")))(),a=(t=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(n.tables.messages.index("messageDisplayOrder")).getKeyRange(e).take(20)},[n,e],i.id+":35"))!=null?t:[];return a}function p(e){var t=o("react-compiler-runtime").c(6),n=(c||(c=r("useReStore")))(),a;t[0]!==n.tables.thread_point_query_ttrc||t[1]!==e?(a=function(){return o("ReQL").fromTableAscending(n.tables.thread_point_query_ttrc).getKeyRange(e)},t[0]=n.tables.thread_point_query_ttrc,t[1]=e,t[2]=a):a=t[2];var l;t[3]!==n||t[4]!==e?(l=[n,e],t[3]=n,t[4]=e,t[5]=l):l=t[5];var s=o("ReQLSuspense").useFirst(a,l,i.id+":48");if(s!=null)return s}function _(e,t,n){r("QPLUserFlow").endSuccess(d,{annotations:{string:{hasMessageDataChanged:t,status:"completed"}},instanceKey:e,timestamp:n!=null?n:void 0})}function f(e,t,n,a){r("QPLUserFlow").start(d,{annotations:{string:{thread_id:(u||(u=o("I64"))).to_string(t),thread_subtype:a?(u||(u=o("I64"))).to_string(a):null,thread_type:u.to_string(n)}},instanceKey:e})}function g(e,t){r("QPLUserFlow").addPoint(d,t,{instanceKey:e})}function h(e){r("QPLUserFlow").addPoint(d,"selective_sync_remediation_end",{instanceKey:e}),r("QPLUserFlow").endSuccess(d,{annotations:{string:{status:"skipped"}},instanceKey:e})}function y(t,n){return t.length!==n.length?!1:!t.some(function(t,r){var o=n[r],a=o.text,i=babelHelpers.objectWithoutPropertiesLoose(o,e),l=t.text,u=babelHelpers.objectWithoutPropertiesLoose(t,s);if(JSON.stringify(i)!==JSON.stringify(u))return!0})}l.useLast20Messages=m,l.useTPQEntry=p,l.logCompleteEndSuccess=_,l.logEventStreamStart=f,l.logPoint=g,l.logSkippedEndSuccess=h,l.isMessageDataUnchanged=y}),98);
__d("MWChatTypingIndicator.react",["MessengerWebUXLogger","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u="x1h06q2e-B",c="x1yitzd3-B",d={dot:{alignItems:"x6s0dn4",animationDuration:"xmg6eyc",animationIterationCount:"xa4qsjk",animationName:"xwnhzmj",animationTimingFunction:"x4hg4is",backgroundColor:"x1iuwi03",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",display:"x78zum5",height:"xqu0tyb",marginInlineStart:"xm2jcoa",marginInlineEnd:"x1mpyi22",marginLeft:null,marginRight:null,width:"x51ohtg",$$css:!0},dot1:{animationDelay:"x1t83zlg",$$css:!0},dot1Opacity:{animationDelay:"x1uzojwf",$$css:!0},dot2:{animationDelay:"x1x1c4bx",$$css:!0},dot2Opacity:{animationDelay:"xfjzax6",$$css:!0},dot3:{animationDelay:"x1xwhvez",$$css:!0},dot3Opacity:{animationDelay:"x1la68h3",$$css:!0},dotOpacity:{animationDuration:"xmg6eyc",animationIterationCount:"xa4qsjk",animationName:"x1bcwpiy",animationTimingFunction:"x4hg4is",opacity:"x1hc1fzr",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1ta3ar0",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(10),n=e.threadType,a;t[0]!==n?(a={eventName:"show_typing_indicators",threadType:n},t[0]=n,t[1]=a):a=t[1];var i=r("MessengerWebUXLogger").useImpressionLoggerRef(a),l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=[d.dotOpacity,d.dot1Opacity],t[2]=l):l=t[2];var u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(o("react-strict-dom").html.div,{style:l,children:s.jsx(o("react-strict-dom").html.div,{style:[d.dot,d.dot1]})}),t[3]=u):u=t[3];var c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=[d.dotOpacity,d.dot2Opacity],t[4]=c):c=t[4];var m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(o("react-strict-dom").html.div,{style:c,children:s.jsx(o("react-strict-dom").html.div,{style:[d.dot,d.dot2]})}),t[5]=m):m=t[5];var p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=[d.dotOpacity,d.dot3Opacity],t[6]=p):p=t[6];var _;t[7]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(o("react-strict-dom").html.div,{style:p,children:s.jsx(o("react-strict-dom").html.div,{style:[d.dot,d.dot3]})}),t[7]=_):_=t[7];var f;return t[8]!==i?(f=s.jsxs(o("react-strict-dom").html.div,{ref:i,style:d.root,children:[u,m,_]}),t[8]=i,t[9]=f):f=t[9],f}l.default=m}),98);
__d("XCometCommunityThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsExtraRouteBuilder")("/messages/c/{folder_id}/t/{thread_key}/",Object.freeze({}),["/messages/c/{folder_id}/"],void 0),s=e;l.default=s}),98);
__d("XMessengerDotComCometCommunityThreadsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsExtraRouteBuilder")("/c/{folder_id}/t/{thread_key}/",Object.freeze({}),["/c/{folder_id}/"],void 0),s=e;l.default=s}),98);
__d("MWInboxCommunityThreadsRouteBuilder",["CurrentEnvironment","XCometCommunityThreadsControllerRouteBuilder","XMessengerDotComCometCommunityThreadsControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e=r("CurrentEnvironment").facebookdotcom?{buildUriForMessage:function(t){var e=t.folder_id,n=t.thread_key;return r("XCometCommunityThreadsControllerRouteBuilder").buildUri({folder_id:e,thread_key:n})},buildURL:function(t){var e=t.folder_id,n=t.thread_key;return r("XCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:e,thread_key:n})},buildURLWithoutThread:function(t){var e=t.folder_id;return r("XCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/messages/c/{folder_id}/",{folder_id:e})}}:{buildUriForMessage:function(t){var e=t.folder_id,n=t.thread_key;return r("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildUri({folder_id:e,thread_key:n})},buildURL:function(t){var e=t.folder_id,n=t.thread_key;return r("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:e,thread_key:n})},buildURLWithoutThread:function(t){var e=t.folder_id;return r("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/c/{folder_id}/",{folder_id:e})}},s=e.buildURL,u=e.buildURLWithoutThread;l.buildURL=s,l.buildURLWithoutThread=u}),98);
__d("MessengerDesktopPresenceInfo",["FBLogger","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="__fb_messenger_desktop_presence_info";function u(){var t,n=(e||(e=r("WebStorage"))).getLocalStorageForRead();return JSON.parse((t=n==null?void 0:n.getItem(s))!=null?t:"null")}function c(){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(t==null)return r("FBLogger")("desktop_messenger_deeplink_presence","local_storage_not_found").warn("Messenger Desktop Presence Token cannot be created if local storage doesn't exist"),null;var n={lastActiveTimestamp:Date.now()},o=e.setItemGuarded(t,s,JSON.stringify(n));return o!=null&&r("FBLogger")("desktop_messenger_deeplink_presence","create_presence_info_error").warn(o.toString()),n}l.getPresenceInfo=u,l.createPresenceInfo=c}),98);
__d("MessengerDesktopLocalServerRequest",["ConstUriUtils","MessengerDesktopPresenceInfo"],(function(t,n,r,o,a,i,l){"use strict";var e=2e3,s=(function(){function t(t,n){var r=this,a,i;this.$1=function(){r.request.status===200&&o("MessengerDesktopPresenceInfo").createPresenceInfo()};var l="http://localhost:"+n+t;this.uri=(a=(i=o("ConstUriUtils").getUri(l))==null?void 0:i.toString())!=null?a:l,this.request=new XMLHttpRequest,this.request.timeout=e,this.request.onloadend=this.$1}var n=t.prototype;return n.setOnLoadEndHandler=function(t){var e=this;return this.request.onloadend=function(){e.$1(),t(e.request.status)},this},n.setErrorHandler=function(t){var e=this;return this.request.onerror=function(){e.request.status===500&&o("MessengerDesktopPresenceInfo").createPresenceInfo(),t(e.request.status)},this},n.setTimeoutHandler=function(t){return this.request.ontimeout=t,this},n.send=function(){this.request.open("GET",this.uri),this.request.send()},t})();l.default=s}),98);
__d("XMessengerDotComDesktopControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/desktop/",Object.freeze({start_download:!1,m:!1}),new Set(["m"])),s=e;l.default=s}),98);
__d("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/desktop/launch/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("MessengerDesktopDeepLinkUtils",["fbt","MessengerDesktopLocalServerRequest","MessengerDesktopPresenceInfo","Promise","UserAgent","XMessengerDotComDesktopControllerRouteBuilder","XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u="messenger",c=3103,d=1e3*60*60*24*28,m="https://www.messenger.com/desktop/";function p(e){return u+"://room?joinurl="+e}function _(t){return new(e||(e=n("Promise")))(function(e){new(r("MessengerDesktopLocalServerRequest"))("/ping",t).setOnLoadEndHandler(function(t){return e(t)}).setTimeoutHandler(function(t){return e(!1)}).setErrorHandler(function(t){return e(!1)}).send()})}function f(){var e=o("MessengerDesktopPresenceInfo").getPresenceInfo();return e==null?!1:Date.now()-e.lastActiveTimestamp<=d}function g(){var e=r("gkx")("23666"),t=r("gkx")("23667");if(t){var n=r("gkx")("23668");return e||n}else return e}function h(){return r("gkx")("23669")}function y(){if(r("gkx")("23670")||!g())return!1;switch(b()){case"Windows":return!1;case"Mac":return r("gkx")("23671");default:return!1}}var C={openMessengerForDesktop:s._(/*BTDS*/"Open Messenger for Desktop"),openMessengerForMac:s._(/*BTDS*/"Open Messenger for Mac"),openMessengerForWindows:s._(/*BTDS*/"Open Messenger for Windows"),tryMessengerForDesktop:s._(/*BTDS*/"Try Messenger for Desktop"),tryMessengerForMac:s._(/*BTDS*/"Try Messenger for Mac"),tryMessengerForWindows:s._(/*BTDS*/"Try Messenger for Windows")};function b(){return r("UserAgent").isPlatform("Windows")?"Windows":r("UserAgent").isPlatform("Mac OS X")?"Mac":"Desktop"}function v(e){var t;return(t=r("XMessengerDotComDesktopControllerRouteBuilder").buildUri({funnel_session_id:e}).setDomain("www.messenger.com"))==null||(t=t.setProtocol("https"))==null?void 0:t.toString()}function S(e){var t;return(t=r("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder").buildUri(e).setDomain("messenger.com"))==null||(t=t.setProtocol("https"))==null?void 0:t.toString()}function R(){var e=g()?"open":"try",t=b();return C[e+"MessengerFor"+t]}function L(e){var t,n;return g()?(t=S(e))!=null?t:m:(n=v(e.funnel_session_id))!=null?n:m}l.PORT=c,l.getRoomDeepLink=p,l.isMessengerDesktopRunning=_,l.isMessengerDesktopProbablyInstalled=f,l.isMessengerDesktopDeeplinkEligible=g,l.isMessengerDesktopPromoEligible=h,l.isMessengerDesktopDeeplinkEnabled=y,l.getDownloadURI=v,l.getDeeplinkButtonLabel=R,l.getDeeplinkButtonURI=L}),226);
__d("SelectiveSyncTTRCLogger.react",["CometPlaceholder.react","I64","Int64Hooks","LSIntEnum","LSThreadPointQueryTTRCStatus","MWCMSelectiveSyncTTRCQPLLoggingUtils","Random","ReQL","ReQLSuspense","areEqual","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=d||(d=o("react")),p=d.useRef;function _(t){var n=o("react-compiler-runtime").c(40),a=t.instanceKey,l=t.isReportThreadViewOpenSprocCalled,d=t.reportThreadViewOpenCalledTimestamp,m=t.setInstanceKey,_=t.threadKey,f=t.threadSubtype,g=t.threadType,h=p(!1),y=(e||(e=r("useReStore")))(),C;n[0]!==y.tables.messages||n[1]!==_?(C=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(y.tables.messages.index("messageDisplayOrder")).getKeyRange(_).take(20),i.id+":56"),n[0]=y.tables.messages,n[1]=_,n[2]=C):C=n[2];var b=C,v;n[3]!==y.tables.reactions||n[4]!==_?(v=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(y.tables.reactions).getKeyRange(_).take(20),i.id+":61"),n[3]=y.tables.reactions,n[4]=_,n[5]=v):v=n[5];var S=v,R;n[6]!==y.tables.reactions_v2||n[7]!==_?(R=o("ReQLSuspense").toArray(o("ReQL").fromTableDescending(y.tables.reactions_v2).getKeyRange(_).take(20),i.id+":64"),n[6]=y.tables.reactions_v2,n[7]=_,n[8]=R):R=n[8];var L=R,E;n[9]!==a||n[10]!==l||n[11]!==_||n[12]!==f||n[13]!==g?(E=function(){l===!1&&(h.current=!0,o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logEventStreamStart(a,_,g,f))},n[9]=a,n[10]=l,n[11]=_,n[12]=f,n[13]=g,n[14]=E):E=n[14];var k;n[15]!==a||n[16]!==l||n[17]!==d||n[18]!==_||n[19]!==f||n[20]!==g?(k=[a,l,d,_,f,g],n[15]=a,n[16]=l,n[17]=d,n[18]=_,n[19]=f,n[20]=g,n[21]=k):k=n[21],o("Int64Hooks").useEffectInt64(E,k);var I=p(b),T=p(S),D=p(L),x=o("MWCMSelectiveSyncTTRCQPLLoggingUtils").useTPQEntry(_),$;n[22]!==a||n[23]!==b||n[24]!==S||n[25]!==L||n[26]!==d||n[27]!==m||n[28]!==(x==null?void 0:x.dasmExecutionTimestampMs)||n[29]!==(x==null?void 0:x.deltaInsertionTimestampMs)||n[30]!==(x==null?void 0:x.status)?($=function(){var e=x==null?void 0:x.status,t=x==null?void 0:x.deltaInsertionTimestampMs,n=x==null?void 0:x.dasmExecutionTimestampMs;if(h.current===!0&&d!==0){if(e!=null&&(u||(u=o("I64"))).equal(e,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadPointQueryTTRCStatus").SKIPPED)))o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logSkippedEndSuccess(a),h.current=!1,m(r("Random").uint32());else if(e!=null&&(u||(u=o("I64"))).equal(e,(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadPointQueryTTRCStatus").COMPLETED))&&t!=null&&(u||(u=o("I64"))).to_float(t)>d){o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logPoint(a,"selective_sync_remediation_end");var i=!o("MWCMSelectiveSyncTTRCQPLLoggingUtils").isMessageDataUnchanged(I.current,b),l=!(s||(s=r("areEqual")))(T.current,S),p=!s(D.current,L);i||l||p?o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logCompleteEndSuccess(a,"true",n!=null?(u||(u=o("I64"))).to_float(n):void 0):o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logCompleteEndSuccess(a,"false",t!=null?(u||(u=o("I64"))).to_float(t):void 0),I.current=b,T.current=S,D.current=L,h.current=!1,m(r("Random").uint32())}}},n[22]=a,n[23]=b,n[24]=S,n[25]=L,n[26]=d,n[27]=m,n[28]=x==null?void 0:x.dasmExecutionTimestampMs,n[29]=x==null?void 0:x.deltaInsertionTimestampMs,n[30]=x==null?void 0:x.status,n[31]=$):$=n[31];var P;return n[32]!==a||n[33]!==b||n[34]!==S||n[35]!==L||n[36]!==d||n[37]!==m||n[38]!==x?(P=[a,b,S,L,d,m,x],n[32]=a,n[33]=b,n[34]=S,n[35]=L,n[36]=d,n[37]=m,n[38]=x,n[39]=P):P=n[39],o("Int64Hooks").useEffectInt64($,P),null}function f(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"SelectiveSyncTTRCLogger",children:m.jsx(_,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}l.default=f}),98);
__d("XGroupsC4GThreadViewControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/groups/{idorvanity}/chats/{thread_id}/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("useReportThreadViewOpenDebounced",["LSFactory","LSReportThreadViewOpenStoredProcedure","promiseDone","react-compiler-runtime","useDebouncedComet","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var a=o("react-compiler-runtime").c(5),l=(e||(e=r("useReStore")))(),s;a[0]!==l||a[1]!==t?(s=function(){r("promiseDone")(l.runInTransaction(function(e){return r("LSReportThreadViewOpenStoredProcedure")(r("LSFactory")(e),{threadKey:t})},"readwrite",void 0,void 0,i.id+":33"))},a[0]=l,a[1]=t,a[2]=s):s=a[2];var u;return a[3]!==n?(u={leading:!0,wait:n},a[3]=n,a[4]=u):u=a[4],r("useDebouncedComet")(s,u)}l.default=s}),98);
__d("useMWReportThreadOpenOnMountAndFocusWithLogger",["GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWCMSelectiveSyncTTRCQPLLoggingUtils","MetaConfig","Random","SelectiveSyncTTRCLogger.react","ServerTime","VisibilityAPI","mwCMIsAnyCMThread","react","useReStore","useReportThreadViewOpenDebounced"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useRef,p=d.useState,_=r("MetaConfig")._("43");function f(t,n){var a=(e||(e=r("useReStore")))(),i=p(0),l=i[0],u=i[1],d=p(o("Random").uint32()),f=d[0],g=d[1],h=r("mwCMIsAnyCMThread")(t.threadType),y=m(!1),C=h||r("MetaConfig")._("55")&&(o("LSMessagingThreadTypeUtil").isSocialChannelV2(t.threadType)||o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(t.threadType)),b=r("useReportThreadViewOpenDebounced")(t.threadKey,n!=null?n:_);return o("Int64Hooks").useEffectInt64(function(){var e=null;return C&&(e=o("VisibilityAPI").onVisibilityChange(function(){o("VisibilityAPI").isVisibilityHidden()||b()}),h&&o("GroupsCometChatsEngagementLogger").log({action:"background_effect",community_id:(s||(s=o("I64"))).to_string(t.parentThreadKey),event:"report_thread_view_open",source:"blended_threadlist_community_tab",surface:"thread_view",thread_id:(s||(s=o("I64"))).to_string(t.threadKey)}),y.current===!1&&(u(o("ServerTime").getMillis()),y.current=!0,o("MWCMSelectiveSyncTTRCQPLLoggingUtils").logPoint(f,"selective_sync_remediation_start"),b())),function(){e!=null&&o("VisibilityAPI").removeVisibiltyChangeListener(e)}},[a,t.parentThreadKey,t.threadKey,t.threadType,h,f,C,b]),C?c.jsx(r("SelectiveSyncTTRCLogger.react"),{instanceKey:f,isReportThreadViewOpenSprocCalled:y.current,reportThreadViewOpenCalledTimestamp:l,setInstanceKey:g,threadKey:t.threadKey,threadSubtype:t.threadSubtype,threadType:t.threadType}):null}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);