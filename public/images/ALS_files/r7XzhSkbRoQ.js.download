;/*FB_PKG_DELIM*/

__d("MSGRVideoMetadataProvider",["MediaPlaybackCompoundEventUtils","MediaPlaybackMetadataProvider","getVideoBrowserTabId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return{getErrorMetadata:o("MediaPlaybackMetadataProvider").getSNAPLErrorMetadataCommon,getRequiredMetadata:function(t){var e=t.coreVideoPlayerMetaData,n=t.logDataAdditions,a=t.loggingMetaData,i=t.state,l=e.adClientToken==null?"organic":"paid",s=o("MediaPlaybackCompoundEventUtils").getMediaPlaybackAttributionIDV2Root(a),u=o("MediaPlaybackMetadataProvider").getSNAPLRequiredMetadataCommon(i,e,a,n),c=o("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(i,e,a),d=babelHelpers.extends({},u,{author_id:void 0,browser_tab_id:r("getVideoBrowserTabId")(),current_watching_module:"",encrypted_logging_policy:"encrypted_only",media_id:"-1",nav_chain:c.attribution_id_v2,persistent_id:e.videoFBID,sessionizer_nav_chain:s,tracking_token:void 0,tracking_type:l,trackings:void 0});return d},getTagMetadata:function(t){var e=t.coreVideoPlayerMetaData,n=t.logDataAdditions,r=t.loggingMetaData,a=t.state,i=o("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(a,e,r),l=babelHelpers.extends({},i,{video_chaining_depth_level:n.video_chaining_depth_level,video_chaining_parent_video_id:n.video_chaining_parent_video_id,video_chaining_session_id:n.video_chaining_session_id});return l}}}l.creatMSGRVideoMetadataProvider=e}),98);
__d("CometVideoPlayerLoggingConfigForMWChat",["CometVideoPlayerLoggingConfigForDisabledLogging","MSGRVideoMetadataProvider","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e==null?void 0:e.disableLogging)===!0?o("CometVideoPlayerLoggingConfigForDisabledLogging").createCometVideoPlayerLoggingConfigForDisabledLogging():{loggingToSNAPLCreateMetadataProvider:o("MSGRVideoMetadataProvider").creatMSGRVideoMetadataProvider,loggingToSNAPLEnabled:(e==null?void 0:e.withMWChatSNAPLGK)===!0?r("gkx")("12325"):void 0}}l.createCometVideoPlayerLoggingConfigForMWChat=e}),98);
__d("E2EELinkPreviewXMADataType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FALLBACK:1,FB_CLIENT_FETCH:2,OEMBED:4});i.default=e}),66);
__d("FBIconChevronLeftFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsx(o("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M457.905 1075.53a.75.75 0 0 0-1.06-1.06l-4.5 4.5a.75.75 0 0 0 0 1.06l4.5 4.5a.75.75 0 0 0 1.06-1.06l-3.97-3.97 3.97-3.97z"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FBIconChevronRightFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsx(o("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M454.095 1083.47a.75.75 0 1 0 1.06 1.06l4.5-4.5a.75.75 0 0 0 0-1.06l-4.5-4.5a.75.75 0 0 0-1.06 1.06l3.97 3.97-3.97 3.97z"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FBIconDownloadFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsxs(o("XPlatReactSVG").G,{children:[s.jsx(o("XPlatReactSVG").Path,{d:"m101.18 938.694 3.259-3.258a.256.256 0 0 0-.182-.436h-1.382l-.714-5.278a.256.256 0 0 0-.254-.222h-1.803a.256.256 0 0 0-.253.221L99.125 935h-1.382a.256.256 0 0 0-.181.436l3.257 3.258c.1.1.262.1.362 0",transform:"translate(355 144.5)"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M102.656 929.655a.756.756 0 0 0-.749-.655h-1.803a.756.756 0 0 0-.749.655l-.666 4.845h-.946a.756.756 0 0 0-.534 1.29l3.257 3.258a.756.756 0 0 0 1.068 0l3.258-3.258a.756.756 0 0 0-.535-1.29h-.945l-.656-4.845zm-4.026 5.277.495-.432h-.436l-.06.432zm-.298.568h.793a.5.5 0 0 0 .495-.432l.697-5.068h1.377l.686 5.067a.5.5 0 0 0 .495.433h.793L101 938.168l-2.668-2.668z",transform:"translate(355 144.5)"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M96 939v.989c0 .558.453 1.011 1.011 1.011h7.978c.558 0 1.011-.453 1.011-1.011V939a.5.5 0 0 0-1 0v.989a.011.011 0 0 1-.011.011H97.01a.011.011 0 0 1-.011-.011V939a.5.5 0 0 0-1 0z",transform:"translate(355 144.5)"})]})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FBIconEyeCrossFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsxs(o("XPlatReactSVG").G,{children:[s.jsx(o("XPlatReactSVG").Path,{d:"M102 917.5a1.5 1.5 0 0 0-.294 2.97l1.291-2.583a1.489 1.489 0 0 0-.997-.387",transform:"translate(353.5 157) translate(.5 3.5)"}),s.jsx(o("XPlatReactSVG").Path,{d:"M101.024 921.834a3 3 0 1 1 2.658-5.318l.547-1.093a5.992 5.992 0 0 0-2.218-.423c-3.344 0-5.33 2.694-5.859 3.519a.97.97 0 0 0 0 1.042c.434.68 1.893 2.657 4.38 3.258l.492-.985zm6.827-3.311c-.333-.524-1.247-1.797-2.723-2.66l-.694 1.388A2.98 2.98 0 0 1 105 919a2.998 2.998 0 0 1-2.94 2.997l-.49.981c.145.011.29.022.44.022 3.402 0 5.33-2.635 5.841-3.443a.973.973 0 0 0 0-1.034",transform:"translate(353.5 157) translate(.5 3.5)"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"nonzero",d:"m100.447 927.724 5-10a.5.5 0 0 0-.894-.448l-5 10a.5.5 0 0 0 .894.448z",transform:"translate(353.5 157)"})]})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FBIconHdFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsxs(o("XPlatReactSVG").G,{children:[s.jsx(o("XPlatReactSVG").Path,{d:"M104.632 933H104v3h.632c.41 0 .844-.576.844-1.403v-.194c0-.827-.434-1.403-.844-1.403",transform:"translate(354 145)"}),s.jsx(o("XPlatReactSVG").Path,{d:"M107.023 934.598c0 1.627-1.063 2.902-2.391 2.902h-1.382a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 .75-.75h1.382c1.328 0 2.391 1.275 2.391 2.902v.196zm-5.523 2.152a.75.75 0 0 1-1.5 0v-1.25h-1.5v1.25a.75.75 0 0 1-1.5 0v-4.5a.75.75 0 0 1 1.5 0V934h1.5v-1.75a.75.75 0 0 1 1.5 0v4.5zm6.44-3.895c-.068-.835-.145-1.332-.416-1.916a3.457 3.457 0 0 0-1.533-1.485.48.48 0 0 0-.047-.02l-.026-.008c-.475-.214-.917-.276-1.792-.345a28.09 28.09 0 0 0-4.254 0c-.768.06-1.277.115-1.883.381A3.46 3.46 0 0 0 96.45 931l-.013.033c-.236.498-.31.985-.377 1.825a25.389 25.389 0 0 0 0 3.287c.068.837.146 1.334.417 1.916.325.63.883 1.17 1.532 1.485a.377.377 0 0 0 .049.02l.024.009c.476.213.918.276 1.793.345a28.103 28.103 0 0 0 4.253 0c.768-.061 1.278-.116 1.884-.382a3.47 3.47 0 0 0 1.54-1.538l.013-.034c.235-.497.308-.983.376-1.824.072-.936.072-2.348 0-3.285v-.002z",transform:"translate(354 145)"})]})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FBIconInfoCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsx(o("XPlatReactSVG").Path,{d:"M456 1077.5a1.001 1.001 0 0 1 0-2 1.001 1.001 0 0 1 0 2zm1 5.5a.75.75 0 0 1-1.5 0v-3h-.25a.75.75 0 0 1 0-1.5h1a.75.75 0 0 1 .75.75v3.75zm-1-9.5c-3.308 0-6 2.691-6 6s2.692 6 6 6 6-2.691 6-6-2.692-6-6-6z"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("FBIconShareIosFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsxs(o("XPlatReactSVG").G,{fillRule:"nonzero",children:[s.jsx(o("XPlatReactSVG").Path,{d:"M100.5 535h.475c.29 0 .525.235.525.524v4.952c0 .29-.235.524-.525.524h-4.95a.524.524 0 0 1-.525-.524v-4.952c0-.29.235-.524.525-.524h.475a.5.5 0 0 0 0-1h-.475c-.843 0-1.525.682-1.525 1.524v4.952c0 .842.682 1.524 1.525 1.524h4.95c.843 0 1.525-.682 1.525-1.524v-4.952c0-.842-.682-1.524-1.525-1.524h-.475a.5.5 0 0 0 0 1zm-.354-2.146a.5.5 0 1 0 .708-.708l-2-2a.5.5 0 0 0-.708 0l-2 2a.5.5 0 1 0 .708.708l1.646-1.647 1.646 1.647z",transform:"translate(357.5 543.5)"}),s.jsx(o("XPlatReactSVG").Path,{d:"M99 537.5v-6.875a.5.5 0 0 0-1 0v6.875a.5.5 0 0 0 1 0z",transform:"translate(357.5 543.5)"})]})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("InformTreatmentTitle",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({MISINFORMATION:"misinformation",FALSE_NEWS:"false_news",MISLEADING_NEWS:"misleading_news",MISSING_CONTEXT:"missing_context",ALTERED_MEDIA:"altered_media",AI_GENERATED_CONTENT:"ai_generated_content"}),l=e;i.default=l}),66);
__d("LSInsertNewMediaSend",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(51).add({offlineAttachmentId:e[0],offlineThreadingId:e[1],inMessageIndex:e[2],attachmentType:e[3],shouldTranscode:e[4],useDoublePhase:e[5],sendByServer:e[6],isSecure:e[7],state:e[4]?t.i64.cast([0,1]):t.i64.cast([0,3])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMediaSendInsertNewMediaSendStoredProcedure",e.__tables__=["media_send_jobs"],a.exports=e}),null);
__d("LSInsertNewMediaSendStoredProcedure",["LSInsertNewMediaSend","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertNewMediaSend"),a.offlineAttachmentId,a.offlineThreadingId,a.inMessageIndex,a.attachmentType,a.shouldTranscode,a.useDoublePhase,a.sendByServer,a.isSecure);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSLocalApplyOptimisticMessageWithAttachments",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessage"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],void 0,e[7],e[8],e[9],e[10],void 0,e[12],!0).then(function(e){var t;return t=e,r[0]=t[0],r[1]=t[1],t})},function(o){return r[2]=t.i64.of_int32(e[11].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[3]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[11],r[3]).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return r[6]=r[4].get("attachment_fbid"),r[7]=r[4].get("offline_attachment_id"),r[8]=r[4].get("attachment_type"),r[9]=r[4].get("filename"),r[10]=r[4].get("filesize"),r[11]=r[4].get("attachment_index"),r[12]=r[4].get("has_media"),r[13]=r[4].get("has_xma"),r[14]=r[4].get("playable_url"),r[15]=r[4].get("playable_url_mime_type"),r[16]=r[4].get("playable_duration_ms"),r[17]=r[4].get("preview_url"),r[18]=r[4].get("preview_url_mime_type"),r[19]=r[4].get("mini_preview"),r[20]=r[4].get("preview_width"),r[21]=r[4].get("preview_height"),r[22]=r[4].get("xma_layout_type"),r[23]=r[4].get("xmas_template_type"),r[24]=r[4].get("cta1_title"),r[25]=r[4].get("cta2_title"),r[26]=r[4].get("cta3_title"),r[27]=r[4].get("image_url"),r[28]=r[4].get("action_url"),r[29]=r[4].get("title_text"),r[30]=r[4].get("subtitle_text"),r[31]=r[4].get("description_text"),r[32]=r[4].get("source_text"),r[33]=r[4].get("original_file_hash"),r[34]=r[4].get("sound_bite_client_sound_key"),r[35]=r[4].get("sound_bite_visual"),r[36]=r[4].get("ephemeral_media_state"),r[37]=r[4].get("waveform_data"),r[38]=r[4].get("sampling_frequency_hz"),r[17]!==void 0?r[39]=r[17]:r[39]=r[14],t.filter(t.db.table(16).fetch([[[e[1],r[0],r[6]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===r[0]&&n.attachmentFbid===r[6]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[1],messageId:r[0],attachmentFbid:r[6],timestampMs:r[1],offlineAttachmentId:r[7],attachmentType:r[8],filename:r[9],filesize:r[10],attachmentIndex:r[11],hasMedia:r[12],hasXma:r[13],isSharable:!1,playableUrl:r[14],playableUrlMimeType:r[15],playableDurationMs:r[16],previewUrl:r[39],previewUrlMimeType:r[18],miniPreview:r[19],previewWidth:r[20],previewHeight:r[21],xmaLayoutType:r[22],xmasTemplateType:r[23],cta1Title:r[24],cta2Title:r[25],cta3Title:r[26],imageUrl:r[27],actionUrl:r[28],titleText:r[29],subtitleText:r[30],descriptionText:r[31],sourceText:r[32],ephemeralMediaState:r[36],originalFileHash:r[33],authorityLevel:t.i64.cast([0,20]),samplingFrequencyHz:r[38],waveformData:r[37]}):0})}])}):t.resolve()},function(o){return r[2]=t.i64.of_int32(e[11].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[0],r[1],e[3],!1,t.i64.neq(e[6],void 0)):t.resolve()},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",["LSLocalApplyOptimisticMessageWithAttachments","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalApplyOptimisticMessageWithAttachments"),a.senderId,a.threadKey,a.threadType,a.text,a.snippet,a.snippetHasEmoji,a.stickerId,a.replySourceId,a.replySourceType,a.replySourceTypeV2,a.isForwarded,a.attachments,a.mentionData);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSMessageContentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEXT:1,MEDIA_PREVIEW:2,AUDIO_CLIP:4,XMA_FALLBACK:8,LWA_WAVE:16,ADMIN:32,FILE_ATTACHMENT:64,GLYPH:128,TOMBSTONE:256,STORY_REPLY:512,SINGLE_XMA:1024,HSCROLL_XMA:2048,STICKER:4096,FORWARD_INDICATOR:8192,ANIMATED_IMAGE:16384,NULL_STATE:32768,ENCRYPTION_PLACEHOLDER:65536,FUTUREPROOF_PLACEHOLDER:131072,UNAVAILABLE_PLACEHOLDER:262144,LOCATION_PLACEHOLDER:524288,POLL_CREATION_PLACEHOLDER:1048576,CONTACT_SHARE_PLACEHOLDER:2097152,STORY_MENTION_PLACEHOLDER:4194304,META_AI_MESSAGE_PLACEHOLDER:8388608,BUMP_MESSAGE_PLACEHOLDER:16777216,BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_PLACEHOLDER:33554432,STICKER_RECEIVER_FETCH_UNSUPPORTED_PLACEHOLDER:67108864,RECEIVER_FETCH:134217728,STORY_MENTION:268435456,XMA_RECEIVER_FETCH:536870912,NOTE_MENTION_PLACEHOLDER:1073741824,POST_MENTION_PLACEHOLDER:2147483648,LIVE_LOCATION_PLACEHOLDER:4294967296,MESSENGER_MEMORY_PLACEHOLDER:8589934592,RTC_XMA_PLACEHOLDER:17179869184});i.default=e}),66);
__d("LSOptimisticSendXMAMessageForwardFromSecureThread",["LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes","LSUpdateOptimisticAttachmentPreview"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessage"),e[0],e[1],e[2],e[3],void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,3]),e[4],void 0,void 0,!0).then(function(e){var t;return t=e,r[0]=t[0],r[1]=t[1],t})},function(o){return r[3]=t.i64.of_int32(e[6].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(o){return r[7]=r[5].get("attachment_fbid"),r[8]=r[5].get("offline_attachment_id"),r[9]=r[5].get("attachment_type"),r[10]=r[5].get("filename"),r[11]=r[5].get("filesize"),r[12]=r[5].get("attachment_index"),r[13]=r[5].get("has_media"),r[14]=r[5].get("has_xma"),r[15]=r[5].get("playable_url"),r[16]=r[5].get("playable_url_mime_type"),r[17]=r[5].get("playable_duration_ms"),r[18]=r[5].get("preview_url"),r[19]=r[5].get("preview_url_mime_type"),r[20]=r[5].get("mini_preview"),r[21]=r[5].get("preview_width"),r[22]=r[5].get("preview_height"),r[23]=r[5].get("xma_layout_type"),r[24]=r[5].get("xmas_template_type"),r[25]=r[5].get("cta1_title"),r[26]=r[5].get("cta2_title"),r[27]=r[5].get("cta3_title"),r[28]=r[5].get("image_url"),r[29]=r[5].get("action_url"),r[30]=r[5].get("title_text"),r[31]=r[5].get("subtitle_text"),r[32]=r[5].get("description_text"),r[33]=r[5].get("source_text"),r[34]=r[5].get("original_file_hash"),r[35]=r[5].get("sound_bite_client_sound_key"),r[36]=r[5].get("sound_bite_visual"),r[37]=r[5].get("ephemeral_media_state"),t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[1],r[0],r[7]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===r[0]&&n.attachmentFbid===r[7]&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(16).add({threadKey:e[1],messageId:r[0],attachmentFbid:r[7],timestampMs:r[1],offlineAttachmentId:r[8],attachmentType:r[9],filename:r[10],filesize:r[11],attachmentIndex:r[12],hasMedia:r[13],hasXma:r[14],isSharable:!1,playableUrl:r[15],playableUrlMimeType:r[16],playableDurationMs:r[17],previewUrl:r[18],previewUrlMimeType:r[19],miniPreview:r[20],previewWidth:r[21],previewHeight:r[22],xmaLayoutType:r[23],xmasTemplateType:r[24],cta1Title:r[25],cta2Title:r[26],cta3Title:r[27],imageUrl:r[28],actionUrl:r[29],titleText:r[30],subtitleText:r[31],descriptionText:r[32],sourceText:r[33],ephemeralMediaState:r[37],originalFileHash:r[34],authorityLevel:t.i64.cast([0,20])})},function(o){return t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[0],r[1],e[3],!1,!1)},function(o){return t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],r[0],r[7],r[15],void 0,void 0,r[16],r[18],void 0,void 0,r[19],r[21],r[22],r[30])}])}])}):t.resolve()},function(o){return t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[1]),t.i64.cast([0,46]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(31).add({taskId:r[2],threadKey:e[1],offlineThreadingId:r[0],threadAttributionSource:e[5],sendType:t.i64.cast([0,11]),markThreadRead:!1})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",e.__tables__=["attachments","messages_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",["LSOptimisticSendXMAMessageForwardFromSecureThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSendXMAMessageForwardFromSecureThread"),a.senderId,a.threadKey,a.threadType,a.text,a.isForwarded,a.source,a.attachments);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType",["WAArmadilloXMA.pb","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:return"media_label";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return"post_label";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE:return null;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: ",""])),t),"warning_screens"}}l.convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType=s}),98);
__d("MAWDownloadMediaInWorkerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWDownloadMediaInWorker").__setRef("MAWDownloadMediaInWorkerDeferred");function s(t){e.onReady(function(e){return e.maybeDownloadMediaInWorker(t)})}function u(t){e.onReady(function(e){return e.downloadMediaInWorker(t)})}function c(t){e.onReady(function(e){return e.maybeDownloadMediaInWorkerWithPlaintextHash(t)})}function d(t){e.onReady(function(e){return e.maybeBulkDownloadMediaInWorker(t)})}l.maybeDownloadMediaInWorker=s,l.downloadMediaInWorker=u,l.maybeDownloadMediaInWorkerWithPlaintextHash=c,l.maybeBulkDownloadMediaInWorker=d}),98);
__d("MAWGetProtocolMsgIdByMsgIdInUI",["I64","LSDatabaseSingleton","MAWBridgeSendAndReceive","MAWMpsGating","MAWThreadMappingUtils","MAWUserJidWrapper","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WAJids").createJidUtils({platform:"msgr"});async function c(t){var n=await(e||(e=o("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();return n.runInTransaction(async function(e){var n=await e.messages.index("messageId").get(t);if(n==null)return null;var r=await o("MAWThreadMappingUtils").getChatJidFromMappingTable(e,n.threadKey);if(r!=null)return{author:u.toUserJid((s||(s=o("I64"))).to_float(n.senderId).toString()),chat:r,externalId:o("WAStanzaUtils").toStanzaId(n.offlineThreadingId)}},"readonly",void 0,void 0,i.id+":33")}var d=async function(t){if(o("MAWMpsGating").isFullMpsEnabled())return c(t);if(o("MAWMpsGating").isMpsMessageRendering()){var e=await c(t);return e!=null&&o("MAWUserJidWrapper").getMyUserJid()===e.author?{author:"@me",chat:e.chat,externalId:e.externalId}:e}return m(t)},m=function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:t})};l.getProtocolMsgIdByMsgIdUI=d}),98);
__d("MAWSecureAttachmentGroupingUtils",["I64","LSIntEnum","MAWSendFileMsgTypes","MessagingAttachmentType","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.reduce(function(t,n){return(e||(e=o("I64"))).equal(n.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))?t.mediaStagingsImage.push(n):t.mediaStagingsOther.push(n),t},{mediaStagingsImage:[],mediaStagingsOther:[]}),a=n.mediaStagingsImage,i=n.mediaStagingsOther;return[].concat(a,i)}function c(t){var n=new Map,a=t.filter(function(t){return(e||(e=o("I64"))).equal(t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))}),i=a.length;if(i>1){var l=r("uuidv4")();a.forEach(function(e,t){n.set(o("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(e.offlineAttachmentId),{groupId:l,groupIndex:t,groupSize:i})})}return n}function d(e){var t=new Map,n=e.length;if(n>1){var o=r("uuidv4")();e.forEach(function(e,r){t.set(e,{groupId:o,groupIndex:r,groupSize:n})})}return t}l.orderMediaStagingsForGrouping=u,l.generateMediaGroupMetadataForMediaStagings=c,l.generateMediaGroupMetadataForMessageIds=d}),98);
__d("MAWForwardMessage",["MAWBridgeSendAndReceive","MAWCreateOneToOneThread","MAWExternalId","MAWGetEphemeralSettings","MAWGetProtocolMsgIdByMsgIdInUI","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWSecureAttachmentGroupingUtils","MAWThreadId","WAResultOrError","qpl"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=await o("MAWThreadId").isSecureThreadKey(e.tables,t);if(!a){var i=await o("MAWCreateOneToOneThread").call(e,t,void 0,"MAWForwardMessage",r),l=i.jid;return n(l,!0)}var s=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(e.tables,t,"MAWForwardMessage"),u=s.chatJid;return n(u,!1)}function s(e,t,n,r,o,a){return c(e,t,n,r,o,void 0,a)}async function u(e,t,n,r,a){var i=o("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMessageIds(n);await Promise.allSettled([n.map(function(n){return c(e,t,n,r,a,i.get(n))})])}function c(t,n,a,i,l,s,u){var c=o("MAWExternalId").generateExternalId();return e(t,n,function(e,d){return o("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(a).then(function(a){return a!=null?o("MAWGetEphemeralSettings").getEphemeralSetting(e,n).then(function(n){var m=o("MAWBridgeSendAndReceive").sendAndReceive("backend","forwardMsg",{args:{args:{mediaGroupMetadata:s,source:i},chatJid:e,ephemeralSetting:n!=null?n:void 0,externalId:c,isFirstMsg:d,protocolMsgId:a,textWithSubstitutions:u},qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:l});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:e,externalId:c},m,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:l},t)}):o("WAResultOrError").makeResult({description:"unexpected null protocolMsgId",messageType:"fixMe"})})},l)}l.maybeCreateNewThreadAndCallback=e,l.forwardMessage=s,l.forwardMessageBatch=u}),98);
__d("MAWForwardMessageFromSecureThread.react",["FBLogger","I64","LSFactory","LSHotEmojiSize","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSOptimisticSendMessageV2StoredProcedure","LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure","LSShape","LSVec","MAWBridgeSendAndReceive","MAWDbMedia","MAWMpsGating","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MessagePowerUp","MessagingAttachmentType","OfflineThreadingId","ReQL","WAHashUtils","cr:2472","cr:332","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(){return o("MAWMpsGating").isMpsMessageRendering()};function c(t,n,r){return{action_url:void 0,attachment_fbid:n,attachment_index:(e||(e=o("I64"))).zero,attachment_type:t.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:t.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:n,original_file_hash:void 0,playable_duration_ms:t.playableDurationMs,playable_url:URL.createObjectURL(r),playable_url_mime_type:r.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}function d(t,n,r,a){var i;return{action_url:(i=n==null?void 0:n.actionUrl)!=null?i:n==null?void 0:n.nativeUrl,attachment_fbid:r,attachment_index:(e||(e=o("I64"))).zero,attachment_type:t.attachmentType,cta1_title:t.cta1Title,cta2_title:t.cta2Title,cta3_title:t.cta3Title,description_text:t.descriptionText,filename:t.filename,filesize:t.filesize,has_media:!1,has_xma:!0,image_url:void 0,mini_preview:void 0,offline_attachment_id:r,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a!=null?URL.createObjectURL(a):void 0,playable_url_mime_type:a==null?void 0:a.type,preview_height:void 0,preview_url:a!=null?URL.createObjectURL(a):void 0,preview_url_mime_type:a==null?void 0:a.type,preview_width:void 0,source_text:t.sourceText,subtitle_text:t.subtitleText,title_text:t.titleText,xma_layout_type:t.xmaLayoutType,xmas_template_type:t.xmasTemplateType}}function m(e,t,n,a,i,l,s,u){var c=r("LSFactory")(u);return r("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure")(c,{attachments:r("LSVec").ofArray([o("LSShape").ofRecord(l)]),isForwarded:i,senderId:e,source:s,text:a!=null?a:void 0,threadKey:t,threadType:n}).then(function(){return Promise.resolve()})}function p(e,t){if(!(e==null||t==null))return{amplitudes:t.split(",").map(parseFloat),sampling_freq:e}}function _(t,n,a,l,u,c,d,m,_){var f=r("LSFactory")(m);return r("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(f,{attachments:r("LSVec").ofArray([o("LSShape").ofRecord(n)]),isForwarded:c,senderId:d,threadKey:u,threadType:l}).then(function(t){var n=t[0],r=t[1];return m.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!1,messageId:void 0,offlineThreadingId:n,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(e||(e=o("I64"))).of_string(n),threadAttributionSource:_,threadKey:u}).then(function(){return Promise.resolve(n)})}).then(function(t){var a=n.attachment_fbid;return r("LSInsertNewMediaSendStoredProcedure")(f,{attachmentType:n.attachment_type,inMessageIndex:(e||(e=o("I64"))).zero,isSecure:!1,offlineAttachmentId:a,offlineThreadingId:t,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1}).then(function(){return Promise.resolve([t,a])})}).then(function(l){var u=l[0],c=l[1],d=function(a,l){l==null||l.length===0||r("promiseDone")(t.runInTransaction(function(t){var n=r("LSFactory")(t);return r("LSMarkSubJobCompletedV2StoredProcedure")(n,{fbid:(e||(e=o("I64"))).of_string(l),offlineAttachmentId:c}).then(function(){return o("MWPOpenComposerUtils").resumeSendJob(n,u)})},"readwrite",void 0,void 0,i.id+":225"))};return o("MWPComposerMediaUploadUtil").startUpload(void 0,void 0,d,void 0,(e||(e=o("I64"))).equal(n.attachment_type,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)),[a],[c],void 0,void 0,p(n.sampling_frequency_hz,n.waveform_data),void 0,void 0)})}async function f(t,a,l,f,g,h,y,C,b){if(h!=null){var v=h.attachmentType;if(!((e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))))throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var S=null;if(!(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))&&(isFinite(h.attachmentFbid)?S=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(h.attachmentFbid,10))}):S=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:o("WAHashUtils").stringToPlaintextHash(h.attachmentFbid)}).then(function(e){return n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:h.attachmentFbid,idbBlob:e}),e}),S==null))return;await t.runInTransaction(function(i){switch(!0){case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)):{var R;if(S==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var L=new File([S],"mediaForwardedFromSecureThread",{type:S.type}),E=o("OfflineThreadingId").createOfflineThreadingID(),k=o("MWPComposerMediaUploadUtil").getAudioAttachment(E,L,(e||(e=o("I64"))).to_int32((R=h.playableDurationMs)!=null?R:(e||(e=o("I64"))).zero)/1e3,p(h.samplingFrequencyHz!=null?(e||(e=o("I64"))).to_int32(h.samplingFrequencyHz):void 0,h.waveformData));return _(t,k,L,l,a,g,y,i,C)}case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)):{var I;return o("ReQL").firstAsync(o("ReQL").fromTableDescending(i.attachment_ctas).getKeyRange((I=h.defaultCtaId)!=null?I:(e||(e=o("I64"))).zero)).then(function(e){var t,a=h.xmaPreviewFbid;if(a==null)return r("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is null when forwarding XMA"),Promise.resolve([e,void 0]);if(u())t=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:o("WAHashUtils").stringToPlaintextHash(a)}).then(function(e){return n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:h.attachmentFbid,idbBlob:e}),e});else try{t=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(a,10))})}catch(t){var i=r("getErrorSafe")(t);return r("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is not a valid mediaId when forwarding XMA %s",i.message),Promise.resolve([e,void 0])}return t.then(function(t){return Promise.resolve([e,t])}).catch(function(t){return r("FBLogger")("messenger_web_sharing").catching(t).warn("Unable to getBlobDataUrlByXMAId, from MAWForwardMessageFromSecureThread"),Promise.resolve([e,void 0])})}).then(function(e){var t=e[0],r=e[1],s=null;r!=null&&(s=new File([r],"xmaForwardedFromSecureThread",{type:r.type}));var u=o("OfflineThreadingId").createOfflineThreadingID(),c=d(h,t,u,s),p=f.text,_=n("cr:2472")==null||p==null?p:n("cr:2472").unvault(p);return m(y,a,l,b!=null?b:_,g,c,C,i)})}case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)):case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)):case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)):case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)):{var T;if(S==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var D=new File([S],(T=h.filename)!=null?T:"mediaForwardedFromSecureThread",{type:S.type}),x=o("OfflineThreadingId").createOfflineThreadingID(),$=c(h,x,D);return _(t,$,D,l,a,g,y,i,C)}default:throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type")}},"readwrite",void 0,void 0,i.id+":340")}else{var R=f.text;if(R==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var L=n("cr:2472")==null?R:n("cr:2472").unvault(R),E=L==="\u{1F44D}"&&f.hotEmojiSize!=null&&(e||(e=o("I64"))).equal(f.hotEmojiSize,(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL)),k=E?(e||(e=o("I64"))).of_string("369239263222822"):void 0;await t.runInTransaction(function(e){return r("LSOptimisticSendMessageV2StoredProcedure")(r("LSFactory")(e),{extraSendMessageParams:o("LSShape").ofRecord({calculate_denormalizations:!1,is_forwarded:g,mark_read:!1,power_up_style:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagePowerUp").NONE),source:C,sticker_id:k}),mailboxType:s.ofNumber(r("LSMailboxType").MESSENGER),senderId:y,text:E?void 0:b!=null?b:L,threadKey:a,threadType:l})},"readwrite",void 0,void 0,i.id+":551")}}l.getMediaAttachment=c,l.uploadAndSendMediaToOpenThread=_,l.forwardMessage=f}),98);
__d("MAWFowardMessageFromOpenThread",["FBLogger","I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDocumentPreProcess","MAWFetchXMABlob","MAWFetchXMAData","MAWFetchXMADataUtils","MAWForwardMessage","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWMessageSendReporter","MAWUnshimUrl","MAWVault","MAWVideoUtils","MessagingAttachmentType","ReQL","WAArmadilloXMA.pb","WABlobToArrayBuffer","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="369239263222822",c="369239343222814",d="369239383222810";function m(e){return e===u||e===c||e===d}function p(e,t){return Promise.all([o("MAWGetImageSpec").getImageSpec_DEPRECATED(e),Promise.resolve(e),t.arrayBuffer(),o("MAWGetImageSpec").getImageSpec_DEPRECATED(t)]).then(async function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return{file:n,imageSpec:t,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(n),thumbnailUrlAndSpec:{duration:void 0,height:a.height,jpegThumbnail:r,width:a.width},type:"image"}})}function _(e){return o("MAWVideoUtils").getVideoThumbnailUrlAndSpec(e).then(async function(t){return{file:e,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(e),thumbnailUrlAndSpec:t,type:"video"}})}async function f(e,t){var n=await o("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFowardMessageFromOpenThread",url:e}),r=n==null?void 0:new File([n],t,{type:n.type}),a=r!=null?await o("MAWGetImageSpec").getImageSpec_DEPRECATED(r):null;return r!=null&&a!=null?{file:r,height:a.height,width:a.width}:void 0}async function g(e,t,n){var r,a,i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.attachment_ctas).getKeyRange(e));return i==null||t==null&&i.actionUrl==null?null:{actionUrl:(r=i==null?void 0:i.actionUrl)!=null?r:void 0,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:(a=i==null?void 0:i.actionUrl)!=null?a:void 0,title:t!=null?t:void 0}}async function h(e,t,n,a){var i=await y(t,n);if((i==null?void 0:i.actionUrl)==null)throw o("sendToSentQPLLogger").markSendToSentFail(a,"null_xma_url"),r("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads without a defaultCTA and actionUrl");var l=await o("MAWFetchXMAData").fetchXMAData(e,i.actionUrl,[a]);if(l.linkType==="unknown")throw o("sendToSentQPLLogger").markSendToSentFail(a,"unknown_xma_link_type"),r("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads with an unknown link type");return l.linkType==="external"?b(t,i,n,l):C(l,a)}async function y(e,t){var n=e.actionUrl,r=e.defaultCtaId,a=e.defaultCtaTitle;if(r==null)return null;var i=await g(r,a,t);return i!=null?i:{actionUrl:n!=null?n:void 0,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:n!=null?n:void 0,title:a!=null?a:void 0}}async function C(e,t){var n=await o("MAWFetchXMADataUtils").makeXMAFileArgs(e,t),r=e.contentRef,a=e.ctas,i=e.defaultCTA,l=e.overlayIconGlyph,s=e.subtitle_text,u=e.title_text,c=e.xma_message_type,d={contentRef:r,ctas:a,defaultCTA:i,overlayIconGlyph:l,subtitleText:s,titleText:u};return babelHelpers.extends({},n,{xmaArgs:d,xmaMessageType:c!=null?c:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE})}async function b(t,n,r,a){var i=t.attachmentCta1Id,l=t.attachmentCta2Id,s=t.attachmentCta3Id,u=t.cta1Title,c=t.cta2Title,d=t.cta3Title,m=t.faviconUrl,p=t.headerImageUrl,_=t.headerTitle,h=t.maxSubtitleNumOfLines,y=t.maxTitleNumOfLines,C=t.previewUrl,b=t.subtitleText,v=t.titleText,S=await Promise.all([[m,"favicon"],[p,"headerImage"],[C,"preview"]].map(function(e){return f(e[0],e[1])})),R=S[0],L=S[1],E=S[2],k=[];if(i!=null){var I=await g(i,u,r);I!=null&&k.push(I)}if(l!=null){var T=await g(l,c,r);T!=null&&k.push(T)}if(s!=null){var D=await g(s,d,r);D!=null&&k.push(D)}var x={contentRef:a.contentRef,ctas:k.map(function(e){return babelHelpers.extends({},e,{actionUrl:o("MAWUnshimUrl").unshimUrl(e.actionUrl),nativeUrl:o("MAWUnshimUrl").unshimUrl(e.nativeUrl)})}),defaultCTA:babelHelpers.extends({},n,{actionUrl:o("MAWUnshimUrl").unshimUrl(n.actionUrl),nativeUrl:o("MAWUnshimUrl").unshimUrl(n.nativeUrl)}),headerTitle:_,maxSubtitleNumOfLines:(e||(e=o("I64"))).to_int32(h!=null?h:(e||(e=o("I64"))).zero),maxTitleNumOfLines:e.to_int32(y!=null?y:(e||(e=o("I64"))).zero),overlayIconGlyph:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE,subtitleText:b,titleText:v};return{faviconFileArgs:R,headerFileArgs:L,previewFileArgs:E,xmaArgs:x,xmaMessageType:a.xma_message_type}}function v(t){var n=t.attachmentType,a=t.filename,i=t.playableDurationMs,l=t.playableUrl,u=t.playableUrlMimeType,c=t.previewUrl,d=t.previewUrlMimeType;if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE))){if(l==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this attachment");var m=(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE));if(c!=null){var f=m?c+"&":l,g=m?c+"&":c;return Promise.all([window.fetch(f).then(function(e){return e.blob()}),window.fetch(g).then(function(e){return e.blob()})]).then(function(t){var a=t[0],i=t[1],l=new File([a],"mediaForwardedFromOpenThread",{type:m?d:u}),c=new File([i],"previewForwardedFromOpenThread",{type:d});if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))return p(l,c);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))return _(l);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))return p(l,c);throw r("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}var h=m?l+"&":l;return window.fetch(h).then(function(e){return e.blob()}).then(function(t){if(m&&u==="video/mp4")throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is only mp4 url for gif");var i=new File([t],a!=null?a:"mediaForwardedFromOpenThread",{type:u});if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))return o("MAWImagePreProcess").imagePreprocess(i,!1);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))return _(i);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)))return o("MAWDocumentPreProcess").documentPreprocess(i);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))return Promise.all([o("MAWImagePreProcess").getJpegThumbnailInfo(i,400),o("MAWGetImageSpec").getImageSpec_DEPRECATED(i),Promise.resolve(i)]).then(async function(e){var t=e[0],n=e[1],r=e[2];return{file:r,imageSpec:n,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(r),thumbnailUrlAndSpec:t,type:"image"}});throw r("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO))){if(l!=null)return window.fetch(l+"&").then(function(e){return e.blob()}).then(async function(t){var n=new File([t],"mediaForwardedFromOpenThread",{type:u});return{durations:(e||(e=o("I64"))).to_int32(i!=null?i:(e||(e=o("I64"))).zero)/1e3,file:n,isPtt:!0,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(n),type:"audio"}});throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this audio attachment")}if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER))){if(l==null&&c==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no url for this sticker");return l!=null?c!=null?Promise.all([window.fetch(l).then(function(e){return e.blob()}),window.fetch(c).then(function(e){return e.blob()})]).then(function(e){var t=e[0],n=e[1],r=new File([t],"mediaForwardedFromOpenThread",{type:u}),o=new File([n],"previewForwardedFromOpenThread",{type:d});return p(r,o)}):window.fetch(l).then(function(e){return e.blob()}).then(function(e){var t=new File([e],"mediaForwardedFromOpenThread",{type:u});return p(t,t)}):window.fetch(c).then(function(e){return e.blob()}).then(function(e){return o("MAWImagePreProcess").imagePreprocess(new File([e],"previewForwardedFromOpenThread",{type:d}),!0)})}throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding other media types. Received attachment %d",(s||(s=o("LSIntEnum"))).toNumber(n))}function S(t,n,a,i,l,u,c,d,p){return o("MAWForwardMessage").maybeCreateNewThreadAndCallback(n,a,function(_,f){var g=o("MAWGetEphemeralSettings").getEphemeralSetting(_,a),y=f;return g.then(function(a){if(u!=null){if(m(u.attachmentFbid)){var f=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:"\u{1F44D}",ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:l,source:c,specialTextSize:1},chatJid:_,externalId:p,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},f,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)}return(e||(e=o("I64"))).equal(u.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))?h(t,u,n,d).then(function(e){var t=e.faviconFileArgs,l=e.headerFileArgs,s=e.previewFileArgs,u=e.xmaArgs,c=e.xmaMessageType,m=i.text,f=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendXMAShareMsg",{args:{content:m!=null&&o("MAWVault").isVaulted(m)?o("MAWVault").unvault(m):m,ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:!0,xmaMessageType:c!=null?c:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE},chatJid:_,faviconFile:t,headerFile:l,previewFile:s,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d,xmaArgs:u,xmaMsgExternalId:p});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},f,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)}):v(u).then(async function(e){var t,i;switch(e.type){case"image":{var s=e.imageSpec,u=e.thumbnailUrlAndSpec;i={args:{ephemeralSetting:a!=null?a:void 0,height:s.height,isFirstMsg:y,isForwarded:l,jpegThumbnail:u==null?void 0:u.jpegThumbnail,jpegThumbnailHeight:u==null?void 0:u.height,jpegThumbnailWidth:u==null?void 0:u.width,source:c,width:s.width},attachmentType:"image",chatJid:_,externalId:p};break}case"video":{var m=e.thumbnailUrlAndSpec;i={args:{duration:m.duration,ephemeralSetting:a!=null?a:void 0,height:m.height,isFirstMsg:y,isForwarded:l,jpegThumbnail:m.jpegThumbnail,jpegThumbnailHeight:m.height,jpegThumbnailWidth:m.width,source:c,width:m.width},attachmentType:"video",chatJid:_,externalId:p};break}case"audio":{var f=e.durations,g=e.isPtt;i={args:{duration:Math.round(f),ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:l,isPtt:g,source:c},attachmentType:"audio",chatJid:_,externalId:p};break}case"document":{i={args:{ephemeralSetting:a!=null?a:void 0,filename:e.filename,isFirstMsg:y,isForwarded:l,source:c},attachmentType:"application",chatJid:_,externalId:p};break}}if(i==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this attachment type: %s",e.type);var h=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsgV2",babelHelpers.extends({},i,{mimeType:e.file.type,plaintext:(t=e.plaintext)!=null?t:await o("WABlobToArrayBuffer").blobToArrayBuffer(e.file),qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d}));return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},h,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)})}var g=i.text;if(g!=null){var C=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:o("MAWVault").isVaulted(g)?o("MAWVault").unvault(g):g,ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:l,source:c},chatJid:_,externalId:p,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},C,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)}throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this types")})},d)}l.downloadMediaByUrl=v,l.forwardMessage=S}),98);
__d("isReceiverFetchSticker",["I64","LSIntEnum","MessagingAttachmentType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.attachmentType,a=(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)),i=t.receiverFetchId;return a&&i!=null}l.default=u}),98);
__d("MAWMediaDownloadStatusBackendFetcher",["I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaSetClientMediaStatus","MessagingAttachmentType","ODS","WAHashUtils","isReceiverFetchSticker","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e||(e=o("react"))).useEffect,m=new Set;function p(e){var t=o("react-compiler-runtime").c(7),n=e.attachment,a=e.mediaRenderQpl,i=e.mediaStatus,l=e.statusKey,s=r("useAsyncReStore")(),u,c;t[0]!==n||t[1]!==s||t[2]!==a||t[3]!==i||t[4]!==l?(u=function(){f(n,a,i,l,s)},c=[s,n,a,i,l],t[0]=n,t[1]=s,t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=c):(u=t[5],c=t[6]),d(u,c)}function _(e){var t=o("react-compiler-runtime").c(4),n=r("useAsyncReStore")(),a,i;t[0]!==e||t[1]!==n?(a=function(){e.forEach(function(e){var t=e.attachment,r=e.mediaRenderQpl,o=e.mediaStatus,a=e.statusKey;f(t,r,o,a,n,!0)})},i=[n,e],t[0]=e,t[1]=n,t[2]=a,t[3]=i):(a=t[2],i=t[3]),d(a,i)}function f(e,t,n,a,i,l){if(l===void 0&&(l=!1),!(e==null||a==null)){var d=r("isReceiverFetchSticker")(e),p=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)),_=e.transportKey==="FBBroker"||e.transportKey==="FBLegacyBroker",f=!_&&(s||(s=o("I64"))).to_int32(e.authorityLevel)===r("LSAuthorityLevel").OPTIMISTIC,g=n!=null,h=p||f||_||d||g||m.has(a);if((c||(c=o("ODS"))).bumpEntityKey(3185,"media_initial_download_status",(l?"bulk":"single")+"."+(h?"skip":"request")),h){t==null||t.addPoint("skip_fetch_download_status");return}t==null||t.addPoint("request_download_status"),m.add(a);var y=isNaN(a),C=y?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaDownloadStatusByPlaintextHash",{plaintextHash:o("WAHashUtils").stringToPlaintextHash(a),qplInstanceKey:t==null?void 0:t.getInstanceKey()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaDownloadStatusByMediaId",{mediaId:o("MAWDbMedia").convertNumberToMediaId(parseInt(a,10)),qplInstanceKey:t==null?void 0:t.getInstanceKey()});r("promiseDone")(C.then(function(e){e!=null&&o("MAWMediaSetClientMediaStatus").call(i,a,e)}))}}l.useFetchInitialDownloadStatus=p,l.useFetchInitialDownloadStatusBulk=_}),98);
__d("MAWMediaSetMediaValidatedResult",["LSIntEnum","MAWClientMediaStatusUtils","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){r("promiseDone")(t,function(t){return t.runInTransaction(async function(t){var r=await t.client_media_status.get(n);return r==null?t.client_media_status.add(babelHelpers.extends({id:n,mainMediaStatus:(e||(e=o("LSIntEnum"))).ofNumber(1),mainMediaStatusDetails:"optimistic_with_validation_result",previewMediaStatus:e.ofNumber(1),previewMediaStatusDetails:"optimistic_with_validation_result"},o("MAWClientMediaStatusUtils").getValidationResults(a))):t.client_media_status.put(babelHelpers.extends({},r,{id:n},o("MAWClientMediaStatusUtils").getValidationResults(a)))},"readwrite",void 0,void 0,i.id+":26")})}l.call=s}),98);
__d("useMAWMediaDownloadUIStateDebounced",["react","react-compiler-runtime","useMAWMediaDebouncedState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(4),n=r("useMAWMediaDebouncedState")(e),a=n[0],i=n[1],l,u;return t[0]!==i||t[1]!==e?(l=function(){i(e,!(e==="loading"||e==="downloaded"))},u=[e,i],t[0]=i,t[1]=e,t[2]=l,t[3]=u):(l=t[2],u=t[3]),s(l,u),a}l.default=u}),98);
__d("useMAWMediaValidationResult",["I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaSetMediaValidatedResult","MessagingAttachmentType","WAHashUtils","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useMemo,p=new Set;function _(e,t){var n=o("react-compiler-runtime").c(5),a=r("useAsyncReStore")(),i,l;n[0]!==e||n[1]!==a||n[2]!==t?(i=function(){if(e!=null){var n=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),i=s.equal(e.attachmentType,u.ofNumber(r("MessagingAttachmentType").AUDIO)),l=e.attachmentFbid;if(!p.has(l)&&(n||i)){p.add(l);var c=isNaN(l),d=c?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByPlainTextHash",{plaintextHash:o("WAHashUtils").stringToPlaintextHash(l),qplInstanceKey:t==null?void 0:t.getInstanceKey()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByMediaId",{mediaId:o("MAWDbMedia").convertNumberToMediaId(parseInt(l,10)),qplInstanceKey:t==null?void 0:t.getInstanceKey()});r("promiseDone")(d.then(function(e){if(e!=null){var t=c?o("WAHashUtils").stringToPlaintextHash(l):o("MAWDbMedia").convertNumberToMediaId(parseInt(l,10));o("MAWMediaSetMediaValidatedResult").call(a,t.toString(),e)}}),f)}}},l=[e,a,t],n[0]=e,n[1]=a,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),d(i,l)}function f(){}function g(e,t,n){var a=o("react-compiler-runtime").c(5);_(e);var i,l;a[0]!==e||a[1]!==n||a[2]!==t?(i=function(){if(e!=null){var a=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO));if(a){var i=n!=null;if(i){var l=n==null?void 0:n.validationResult;l!=null&&(t==null||t.addAnnotations({int:{audio_avg_bits_per_second:l.audioAvgBitsPerSecond,audio_number_of_channels:l.audioNumberOfChannels,audio_sampling_rate:l.audioSamplingRate,video_avg_bits_per_second:l.videoAvgBitsPerSecond,video_calculated_fps:l.videoCalculatedFps,video_duration:l.videoDuration,video_height:l.videoHeight,video_nominal_fps:l.videoNominalFps,video_width:l.videoWidth},string:{audio_stream_type:l.audioStreamType,validated_mime_type:l.validatedMimeType,video_stream_type:l.videoStreamType}}))}}}},l=[e,n,t],a[0]=e,a[1]=n,a[2]=t,a[3]=i,a[4]=l):(i=a[3],l=a[4]),d(i,l);var c;e:{if(e==null){c=null;break e}var m=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO));if(!m){c=null;break e}var p=n!=null;if(!p){c=void 0;break e}var f=n==null?void 0:n.validationResult;if(f==null){c=void 0;break e}c=f}return c}l.default=g}),98);
__d("useMAWMediaDownloadStatus",["MAWMediaDownloadStatusUIState","ReQL","ReQLSuspense","cr:17206","emptyHook","gkx","react","useMAWMediaDownloadUIStateDebounced","useMAWMediaValidationResult","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo,c=n("cr:17206")||{useFetchInitialDownloadStatus:r("emptyHook").thatReturnsNull};function d(t,n,a){var l=(e||(e=r("useReStore")))(),s=a!=null?a:t==null?void 0:t.attachmentFbid,d=o("ReQLSuspense").useFirst(function(){return s!=null?o("ReQL").fromTableAscending(l.tables.client_media_status).getKeyRange(s):o("ReQL").empty()},[l,s],i.id+":48"),m=r("gkx")("18676")?u(function(){return o("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(d,s,t)},[d,s,t]):o("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(d,s,t),p=m.mawMediaStatus,_=m.nonDebouncedUIState,f=m.status,g=r("useMAWMediaDownloadUIStateDebounced")(_),h=r("useMAWMediaValidationResult")(t,n,p);return c.useFetchInitialDownloadStatus({attachment:t,mediaRenderQpl:n,mediaStatus:f,statusKey:s}),{status:f,uiState:g,validationResult:h}}l.default=d}),98);
__d("useShouldShowPlaybackErrorFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(3),a=r("useMAWMediaDownloadStatus")(e,t),i=a.validationResult;if(e==null)return!1;var l;return n[0]!==e||n[1]!==i?(l=o("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(e,i),n[0]=e,n[1]=i,n[2]=l):l=n[2],l}l.default=e}),98);
__d("useShouldShowUnsupportedCodecFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(3),a=r("useMAWMediaDownloadStatus")(e,t),i=a.validationResult;if(e==null)return!1;var l;return n[0]!==e||n[1]!==i?(l=o("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(e,i),n[0]=e,n[1]=i,n[2]=l):l=n[2],l}l.default=e}),98);
__d("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense",["cr:5970","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e,t,r){var o;return(o=n("cr:5970")==null?void 0:n("cr:5970").getAttachmentBlob_CausesSuspense(e,t,r))!=null?o:""}l.default=u}),98);
__d("MAWVideoAudioPlaybackErrorHandlerUtils",["fbt","BaseMiddot.react","I64","LSIntEnum","MWXLink.react","MessagingAttachmentType","MessengerWebUXLoggerImpl","ReQL","ReQLSuspense","UserAgent","justknobx","react","react-compiler-runtime","useMAWMediaDownloadStatus","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=r("react"));function p(t,n,a){var i,l,u=o("react-compiler-runtime").c(22),d=(i=r("useShouldShowPlaybackErrorFallback")(t,null))!=null?i:!1,p=(l=r("useShouldShowUnsupportedCodecFallback")(t,null))!=null?l:!1,_=o("MessengerWebUXLoggerImpl").useInteractionLogger(),f=r("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();if(d){var g;return u[0]===Symbol.for("react.memo_cache_sentinel")?(g={downloadButton:null,mediaStatusText:s._(/*BTDS*/"_j[\"Invalid file format\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]"),retryButton:null},u[0]=g):g=u[0],g}if(p){var h=(e||(e=o("I64"))).equal(t.attachmentType,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),y=e.equal(t.attachmentType,c.ofNumber(r("MessagingAttachmentType").AUDIO));if(h){var C;u[1]!==t||u[2]!==f?(C=f(t,"MAWVideoAudioPlaybackErrorHandlerUtils"),u[1]=t,u[2]=f,u[3]=C):C=u[3];var b=C;if(!b&&r("justknobx")._("4203")){var v;return u[4]===Symbol.for("react.memo_cache_sentinel")?(v={downloadButton:null,mediaStatusText:s._(/*BTDS*/"Error loading file"),retryButton:null},u[4]=v):v=u[4],v}var S;u[5]===Symbol.for("react.memo_cache_sentinel")?(S=m.jsx(r("BaseMiddot.react"),{}),u[5]=S):S=u[5];var R;u[6]!==_?(R=function(){_==null||_({eventName:"click_unsupported_video_download_from_mustache"})},u[6]=_,u[7]=R):R=u[7];var L;u[8]===Symbol.for("react.memo_cache_sentinel")?(L=s._(/*BTDS*/"Download to play"),u[8]=L):L=u[8];var E;u[9]!==b||u[10]!==R?(E=m.jsxs(m.Fragment,{children:[S,m.jsx(r("MWXLink.react"),{download:!0,href:b,onClick:R,children:L})]}),u[9]=b,u[10]=R,u[11]=E):E=u[11];var k=E,I;u[12]===Symbol.for("react.memo_cache_sentinel")?(I=s._(/*BTDS*/"Browser doesn't support this video"),u[12]=I):I=u[12];var T;return u[13]!==k?(T={downloadButton:k,mediaStatusText:I,retryButton:null},u[13]=k,u[14]=T):T=u[14],T}if(y){var D;return u[15]===Symbol.for("react.memo_cache_sentinel")?(D={downloadButton:null,mediaStatusText:s._(/*BTDS*/"Browser doesn't support this audio"),retryButton:null},u[15]=D):D=u[15],D}}var x;u[16]!==n||u[17]!==a?(x=n?m.jsxs(m.Fragment,{children:[m.jsx(r("BaseMiddot.react"),{}),m.jsx(r("MWXLink.react"),{onClick:a,children:s._(/*BTDS*/"Retry")})]}):null,u[16]=n,u[17]=a,u[18]=x):x=u[18];var $=x,P;u[19]===Symbol.for("react.memo_cache_sentinel")?(P=s._(/*BTDS*/"Couldn't download"),u[19]=P):P=u[19];var N;return u[20]!==$?(N={downloadButton:null,mediaStatusText:P,retryButton:$},u[20]=$,u[21]=N):N=u[21],N}function _(t){var n=o("react-compiler-runtime").c(7),a=(u||(u=r("useReStore")))(),l;n[0]!==a.tables.attachments||n[1]!==t.messageId||n[2]!==t.threadKey?(l=function(){return o("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(t.threadKey,t.messageId)},n[0]=a.tables.attachments,n[1]=t.messageId,n[2]=t.threadKey,n[3]=l):l=n[3];var s;n[4]!==a||n[5]!==t?(s=[a,t],n[4]=a,n[5]=t,n[6]=s):s=n[6];var d=o("ReQLSuspense").useFirst(l,s,i.id+":167"),m=r("useMAWMediaDownloadStatus")(d),p=m.validationResult;if(d==null)return!1;var _=(e||(e=o("I64"))).equal(d.attachmentType,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(d.attachmentType,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO));if(!_)return!1;var f=p!=null?p:{},g=f.validatedMimeType;return g==="invalid-mp4"}var f=Object.freeze({Chrome:["H263","Vvc","Av1"],Edge:["H263","Vvc","Av1"],Firefox:["H263","Vvc","Hevc","Av1"],Safari:["H263","Vvc","Vp9","Av1"]});function g(e){return e==null?!0:r("UserAgent").isBrowser("Chrome")?f.Chrome.includes(e)===!1:r("UserAgent").isBrowser("Firefox")?f.Firefox.includes(e)===!1:r("UserAgent").isBrowser("Edge")?f.Edge.includes(e)===!1:r("UserAgent").isBrowser("Safari")?f.Safari.includes(e)===!1:!0}function h(t,n){var a=t.attachmentType,i=(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO));if(!i)return!1;var l=n!=null?n:{},s=l.validatedMimeType,u=l.videoStreamType;return g(u)===!1||s==="unsupported-video"}function y(t,n){var a=t.attachmentType,i=(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO));if(!i)return!1;var l=n!=null?n:{},s=l.validatedMimeType;return s==="invalid-mp4"}l.useGetMetadataForMediaNotRendered=p,l.useIsInvalidVideoMessage=_,l.isUnsupportedVideo=h,l.isInvalidVideo=y}),226);
__d("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9834610223284602"}),null);
__d("MWAnimatedImageControlsUtilCometSettingsQuery.graphql",["MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoSettings",kind:"LinkedField",name:"video_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_setting_www",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:e},params:{id:n("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilCometSettingsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9439828062807168"}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery.graphql",["MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"msgr_gif_autoplay",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:e},params:{id:n("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilMWSettingsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWAnimatedImageControlsUtil",["$InternalEnum","CometRelay","MWAnimatedImageControlsUtilCometSettingsQuery.graphql","MWAnimatedImageControlsUtilMWSettingsQuery.graphql","MetaConfig","gkx","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useState,p=n("$InternalEnum").Mirrored(["NOT_FETCHED_YET","OFF","ON"]);function _(){var e=o("react-compiler-runtime").c(3),t=o("CometRelay").useRelayEnvironment(),n=m(null),a=n[0],i=n[1],l=r("gkx")("20836"),s,u;if(e[0]!==t?(s=function(){l||r("promiseDone")(f(t).then(i))},u=[t,l],e[0]=t,e[1]=s,e[2]=u):(s=e[1],u=e[2]),d(s,u),l)return p.ON;switch(a){case null:return p.NOT_FETCHED_YET;case!0:return p.ON;case!1:return p.OFF;default:return p.NOT_FETCHED_YET}}async function f(t){var a=r("MetaConfig")._("37");if(a){var i,l=await o("CometRelay").fetchQuery(t,e!==void 0?e:e=n("MWAnimatedImageControlsUtilMWSettingsQuery.graphql"),{}).toPromise();return(l==null||(i=l.viewer)==null?void 0:i.msgr_gif_autoplay)==="ON"}else{var u,c=await o("CometRelay").fetchQuery(t,s!==void 0?s:s=n("MWAnimatedImageControlsUtilCometSettingsQuery.graphql"),{}).toPromise(),d=c==null||(u=c.viewer)==null||(u=u.video_settings)==null?void 0:u.autoplay_setting_www;return d==="on"}}l.MWAutoplayAnimationsSetting=p,l.useGetMessengerAutoplaySetting=_}),98);
__d("useGetMediaGroupStyles",["MWLSThreadDisplayContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u=180,c=120;function d(e,t){var n=o("react-compiler-runtime").c(40),r=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",a=null,i;if(t===2&&r){var l;n[0]===Symbol.for("react.memo_cache_sentinel")?(l="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1isuwpm xq1dxzn",n[0]=l):l=n[0],a=l}else if(t===2&&!r){var s;n[1]===Symbol.for("react.memo_cache_sentinel")?(s="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1en3kgc xafpxmx",n[1]=s):s=n[1],a=s}else if(t===3&&r){var d;n[2]===Symbol.for("react.memo_cache_sentinel")?(d="x78zum5 xdt5ytf x6ikm8r x10wlt62 xu3xrit xq1dxzn",n[2]=d):d=n[2],a=d}else if(t===3&&!r){var m;n[3]===Symbol.for("react.memo_cache_sentinel")?(m="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1egiwwb xafpxmx",n[3]=m):m=n[3],a=m}else if(t===4&&r){var p;n[4]===Symbol.for("react.memo_cache_sentinel")?(p="x78zum5 xdt5ytf x6ikm8r x10wlt62 x89wwaf xh6lk7j xdj266r",n[4]=p):p=n[4],a=p}else if(t===4&&!r){var _;n[5]===Symbol.for("react.memo_cache_sentinel")?(_="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1gyaxfs xt4sqew xdj266r",n[5]=_):_=n[5],a=_}if(r){var f;n[6]===Symbol.for("react.memo_cache_sentinel")?(f="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 xl56j7k x6ikm8r x10wlt62 x10l6tqk x1wkxgih x1mu601j x2aouup xi3av73 x1i9suas xygnafs",n[6]=f):f=n[6],i=f}else{var g;n[7]===Symbol.for("react.memo_cache_sentinel")?(g="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 x1b51vyi xl56j7k x19aweqf x1e4dklr x1shn012 xfb3i0g x6ikm8r x10wlt62 x10l6tqk xzjbwwf",n[7]=g):g=n[7],i=g}var h,y;n[8]===Symbol.for("react.memo_cache_sentinel")?(y=[{bottom:0,left:17},{bottom:6,left:8,transform:"rotate(-4deg)"},{bottom:12,right:8,transform:"rotate(4deg)"},{bottom:18,left:8,transform:"rotate(-4deg)"}],n[8]=y):y=n[8];var C=e?null:0,b=e?0:null,v;n[9]!==C||n[10]!==b?(v={left:C,right:b,top:0},n[9]=C,n[10]=b,n[11]=v):v=n[11];var S=e?0:null,R=e?null:0,L=r?100:160,E;n[12]!==S||n[13]!==R||n[14]!==L?(E={left:S,right:R,top:L},n[12]=S,n[13]=R,n[14]=L,n[15]=E):E=n[15];var k=e?null:0,I=e?0:null,T;n[16]!==I||n[17]!==k?(T={bottom:0,left:k,right:I},n[16]=I,n[17]=k,n[18]=T):T=n[18];var D;n[19]!==T||n[20]!==v||n[21]!==E?(D=[v,E,T],n[19]=T,n[20]=v,n[21]=E,n[22]=D):D=n[22];var x=e?0:null,$=e?null:0,P;n[23]!==x||n[24]!==$?(P={left:x,right:$,top:0},n[23]=x,n[24]=$,n[25]=P):P=n[25];var N=e?null:0,M=e?0:null,w;n[26]!==N||n[27]!==M?(w={bottom:0,left:N,right:M},n[26]=N,n[27]=M,n[28]=w):w=n[28];var A;n[29]!==P||n[30]!==w?(A=[P,w],n[29]=P,n[30]=w,n[31]=A):A=n[31];var F;n[32]!==D||n[33]!==A?(F={fourImageTile:y,threeImageTile:D,twoImageTile:A},n[32]=D,n[33]=A,n[34]=F):F=n[34],h=F;var O=h,B=t===2?O.twoImageTile:t===3?O.threeImageTile:O.fourImageTile,W=r?c:u,q;return n[35]!==a||n[36]!==B||n[37]!==W||n[38]!==i?(q={containerStyles:a,coordinations:B,imageSize:W,wrapperStyles:i},n[35]=a,n[36]=B,n[37]=W,n[38]=i,n[39]=q):q=n[39],q}function m(e,t,n){var r=o("react-compiler-runtime").c(4),a=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",i=1,l=1;if(e!==!0||t===0||n===0){var s;return r[0]===Symbol.for("react.memo_cache_sentinel")?(s={resizeRatio:1,scaleRatio:1},r[0]=s):s=r[0],s}e===!0&&t!=null&&n!=null&&(t>=n?i=Math.ceil((a?c:u)/n):i=Math.ceil((a?c:u)/t)),e===!0&&i===1&&t!=null&&n!=null&&(l=t>n?t/n:n/t);var d;return r[1]!==i||r[2]!==l?(d={resizeRatio:i,scaleRatio:l},r[1]=i,r[2]=l,r[3]=d):d=r[3],d}l.IMAGE_SIZE=u,l.IMAGE_SIZE_CHAT_TAB=c,l.useGetMediaGroupStyles=d,l.useGetMediaGroupTileImageRatios=m}),98);
__d("MWMessageListImageSizingUtils",["justknobx","useGetMediaGroupStyles"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return n===!0?{maxHeight:t==="Inbox"?o("useGetMediaGroupStyles").IMAGE_SIZE:o("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB,maxWidth:t==="Inbox"?o("useGetMediaGroupStyles").IMAGE_SIZE:o("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB}:t!=="Inbox"&&t!=="ChatTab"||e&&!r("justknobx")._("5036")?{maxHeight:200,maxWidth:480}:{maxHeight:t==="Inbox"?r("justknobx")._("2546"):r("justknobx")._("2547"),maxWidth:t==="Inbox"?r("justknobx")._("2548"):r("justknobx")._("2549")}}l.getMaxPreviewHeightAndWidth=e}),98);
__d("MWXIconEyeCross",["MWXSvgIcon","SVGIcon","cr:22310","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22310")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconInfoCircle",["MWXSvgIcon","SVGIcon","cr:22371","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22371")),r("gkx")("23219"));l.default=e}),98);
__d("MessengerWellbeingInformTreatmentFalcoEventLogger",["$InternalEnum","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw new TypeError("Cannot destructure "+e)}var s=r("requireDeferred")("MwbCmInformTreatmentEventFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),u=r("requireDeferred")("MwbInformTreatmentShownImpressionFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),c=n("$InternalEnum")({AI_GENERATED_CONTENT:"ai_generated_content",MISINFORMATION:"misinformation"});function d(t){var n=babelHelpers.extends({},(e(t),t));s.onReady(function(e){return e.log(function(){return babelHelpers.extends({},n)})})}function m(t){var n=babelHelpers.extends({},(e(t),t));u.onReady(function(e){return e.log(function(){return babelHelpers.extends({},n)})})}l.MWInformTreatmentEventName=c,l.logForCM=d,l.logForPrivateChats=m}),98);
__d("useMWInformTreatmentFalcoEventLogger",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWLSThread","MessengerWellbeingInformTreatmentFalcoEventLogger","ReQL","ReQLSuspense","react-compiler-runtime","useCommunityFolder","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n,a=o("react-compiler-runtime").c(30),l=t.message,c=(u||(u=r("useReStore")))(),d=o("MWLSThread").useThreadExn(l.threadKey),m=r("useCommunityFolder")(d),p=(n=m==null?void 0:m.fbGroupId)!=null?n:(e||(e=o("I64"))).zero,_;a[0]!==d.threadType?(_=o("LSMessagingThreadTypeUtil").isPublicCMThread(d.threadType),a[0]=d.threadType,a[1]=_):_=a[1];var f=_,g;a[2]!==d?(g=o("LSMessagingThreadTypeUtil").isOpenFnFThread(d),a[2]=d,a[3]=g):g=a[3];var h=g,y=!(e||(e=o("I64"))).equal(l.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(1)),C,b;a[4]!==c.tables.attachments||a[5]!==y||a[6]!==l.messageId||a[7]!==l.threadKey?(C=function(){return y?o("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(l.threadKey,l.messageId):o("ReQL").empty()},b=[y,c.tables.attachments,l.threadKey,l.messageId],a[4]=c.tables.attachments,a[5]=y,a[6]=l.messageId,a[7]=l.threadKey,a[8]=C,a[9]=b):(C=a[8],b=a[9]);var v=o("ReQLSuspense").useFirst(C,b,i.id+":63"),S;a[10]!==(v==null?void 0:v.attachmentFbid)||a[11]!==p||a[12]!==h||a[13]!==f||a[14]!==l.isForwarded||a[15]!==l.messageId||a[16]!==l.threadKey||a[17]!==d.threadSubtype||a[18]!==d.threadType?(S=function(n,r){if(f)o("MessengerWellbeingInformTreatmentFalcoEventLogger").logForCM({attachment_id:v==null?void 0:v.attachmentFbid,event_name:n,group_id:(e||(e=o("I64"))).to_string(p),inform_treatment:r!=null?{name:r.name,type:r.type}:void 0,is_forward:l.isForwarded,message_id:l.messageId,thread_id:e.to_string(l.threadKey),thread_subtype:d.threadSubtype!=null?(s||(s=o("LSIntEnum"))).unwrapIntEnum(d.threadSubtype):void 0});else if(h&&n==="impression"){var t;o("MessengerWellbeingInformTreatmentFalcoEventLogger").logForPrivateChats({inform_treatment_name:r!=null?r==null?void 0:r.name:void 0,inform_treatment_type:(t=r==null?void 0:r.type)!=null?t:void 0,thread_type:(s||(s=o("LSIntEnum"))).unwrapIntEnum(d.threadType)})}},a[10]=v==null?void 0:v.attachmentFbid,a[11]=p,a[12]=h,a[13]=f,a[14]=l.isForwarded,a[15]=l.messageId,a[16]=l.threadKey,a[17]=d.threadSubtype,a[18]=d.threadType,a[19]=S):S=a[19];var R=v==null?void 0:v.attachmentFbid,L;return a[20]!==p||a[21]!==h||a[22]!==f||a[23]!==l.isForwarded||a[24]!==l.messageId||a[25]!==l.threadKey||a[26]!==R||a[27]!==d.threadSubtype||a[28]!==d.threadType?(L=[R,p,h,f,l.isForwarded,l.messageId,l.threadKey,d.threadSubtype,d.threadType],a[20]=p,a[21]=h,a[22]=f,a[23]=l.isForwarded,a[24]=l.messageId,a[25]=l.threadKey,a[26]=R,a[27]=d.threadSubtype,a[28]=d.threadType,a[29]=L):L=a[29],o("Int64Hooks").useCallbackInt64(S,L)}l.default=c}),98);
__d("MWInformedTreatment.react",["fbt","FDSBlurredBackgroundImage.react","LSMessagingThreadTypeUtil","MWXColumn.react","MWXColumnItem.react","MWXIconEyeCross","MWXIconInfoCircle","MWXIconStrict.react","MWXImage.react","MWXText.react","MessengerWebUXLogger","ReQL","ReQLSuspense","gkx","qex","react","react-compiler-runtime","useMWInformTreatmentFalcoEventLogger","useMergeRefs","useReStore","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d="0px 4px 14px 0px rgba(0, 0, 0, 0.08)",m="rgba(255, 145, 16, 0.00)",p={overlay:{paddingTop:"xexx8yu",paddingInlineEnd:"x2vl965",paddingBottom:"x18d9i69",paddingInlineStart:"xe2zdcy",width:"xh8yej3",$$css:!0},post:{flexGrow:"x1iyjqo2",height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}},_={AI_GENERATED_CONTENT:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"AI info")},ALTERED_MEDIA:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Altered media")},ALTERED_PHOTO:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Altered photo")},CRUEL:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Cruel content")},FALSE_NEWS:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"False information")},MISLEADING_NEWS:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"Partly false")},MISSING_CONTEXT:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"Missing context")},SENSITIVE:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Sensitive content")},VIOLENCE:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Sensitive content")}},f=s._(/*BTDS*/"View post for more info");function g(e,t,n,a){if(a==null||e==null||t==null||n==null)return!1;var i=e==="ai_generated_content",l=a!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),s=a!=null&&o("LSMessagingThreadTypeUtil").isPublicCMThread(a);return i?r("qex")._("1581")===!0:l||s}function h(e){switch(e){case"ai_generated_content":return"ai_generated_content";case"misinformation":return"misleading_news";case"misleading_news":return"missing_context";case"missing_context":return"altered_media";case"altered_media":return"altered_media";case"false_news":return"false_news";default:return null}}function y(t){var n=o("react-compiler-runtime").c(34),a=t.dimension,l=t.gatingTitle,s=t.gatingType,u=t.isXMA,d=t.mediaRenderQpl,m=t.messageId,g=t.previewUrl,y=t.xstyle,v=u===void 0?!1:u,S=g===void 0?"":g,R=(e||(e=r("useReStore")))(),L;n[0]!==R.tables.messages||n[1]!==m?(L=function(){return o("ReQL").fromTableAscending(R.tables.messages.index("messageId")).getKeyRange(m)},n[0]=R.tables.messages,n[1]=m,n[2]=L):L=n[2];var E;n[3]!==R||n[4]!==m?(E=[R,m],n[3]=R,n[4]=m,n[5]=E):E=n[5];var k=o("ReQLSuspense").useFirstExn(L,E,i.id+":252"),I=r("gkx")("23219"),T=b,D;n[6]===Symbol.for("react.memo_cache_sentinel")?(D=function(t){var e,n=T(t);return n==null||((e=_[n])==null?void 0:e.icon)==null?r("MWXIconEyeCross"):_[n].icon},n[6]=D):D=n[6];var x=D,$;n[7]===Symbol.for("react.memo_cache_sentinel")?($=function(t){var e,n=T(t);return n==null||((e=_[n])==null?void 0:e.text)==null?null:_[n].text},n[7]=$):$=n[7];var P=$,N;n[8]!==l||n[9]!==v?(N=function(t){switch(t){case"warning_screens":return c.jsx("div",{className:"xbudbmw x10l6tqk xwa60dl x11lhmoz xh8yej3",children:c.jsxs(r("MWXColumn.react"),{spacing:12,verticalAlign:"center",children:[c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx(r("MWXIconStrict.react"),{color:"white",icon:x(l),size:32})}),c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"center",color:"white",numberOfLines:1,type:I?"bodyLink3":"bodyLink4",children:P(l)})}),v?c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"center",color:"white",type:I?"meta3":"meta4",children:f})}):null]})});case"media_label":case"post_label":return c.jsxs("div",{className:"x6s0dn4 x1gevrdp x1fk37vd x1bmkqan xqb0rpr xsdp72b x12ol6y4 x180vkcf x1khw62d x709u02 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xe80o0v x1ihrfj4 x78zum5 x10w6t97 x9q68il xyqdw3p x2vl965 xg8j3zb x25sj25 x10l6tqk xpse7mg x1tk7jg1 xuxw1ft x1vvkbs",children:[c.jsx(r("MWXIconStrict.react"),{color:"white",icon:x(l),size:24}),c.jsx(r("MWXText.react"),{align:"center",color:"white",type:I?"bodyLink3":"bodyLink4",children:P(l)})]});default:return null}},n[8]=l,n[9]=v,n[10]=N):N=n[10];var M=N,w=C,A;n[11]!==a||n[12]!==d||n[13]!==S||n[14]!==y?(A=function(t){switch(t){case"media_label":case"post_label":return c.jsx("div",{style:a,children:c.jsx(r("MWXImage.react"),{alt:"",onError:function(){return d==null?void 0:d.endFail("load-image-error")},onLoad:function(){return d==null?void 0:d.endSuccess()},src:S,xstyle:p.post})});case"warning_screens":default:return c.jsxs("div",{style:a,children:[c.jsx(r("FDSBlurredBackgroundImage.react"),{alt:"",onError:function(){return d==null?void 0:d.endFail("load-image-error")},onLoad:function(){return d==null?void 0:d.endSuccess()},src:S,xstyle:[p.post,y,p.overlay]}),c.jsx("div",{className:"x18l40ae x1ey2m1c xtea3wc xtijo5x x1o0tod x47corl x10l6tqk x13vifvy"})]})}},n[11]=a,n[12]=d,n[13]=S,n[14]=y,n[15]=A):A=n[15];var F=A,O;n[16]===Symbol.for("react.memo_cache_sentinel")?(O={eventName:"inform_treatment_chat_impression"},n[16]=O):O=n[16];var B=r("MessengerWebUXLogger").useImpressionLoggerRef(O),W;n[17]!==k?(W={message:k},n[17]=k,n[18]=W):W=n[18];var q=r("useMWInformTreatmentFalcoEventLogger")(W),U;n[19]!==l||n[20]!==s||n[21]!==q?(U={onImpressionStart:function(){var e=h(l),t=w(s.toLocaleLowerCase());e!=null&&t!=null&&q("impression",{name:e,type:t})}},n[19]=l,n[20]=s,n[21]=q,n[22]=U):U=n[22];var V=r("useSinglePartialViewImpression")(U),H=r("useMergeRefs")(B,V),G;n[23]===Symbol.for("react.memo_cache_sentinel")?(G={className:"x78zum5 x5yr21d x1n2onr6 xh8yej3"},n[23]=G):G=n[23];var z;n[24]!==s||n[25]!==F?(z=F(s.toLocaleLowerCase()),n[24]=s,n[25]=F,n[26]=z):z=n[26];var j;n[27]!==s||n[28]!==M?(j=M(s.toLocaleLowerCase()),n[27]=s,n[28]=M,n[29]=j):j=n[29];var K;return n[30]!==H||n[31]!==z||n[32]!==j?(K=c.jsxs("div",babelHelpers.extends({},G,{ref:H,children:[z,j]})),n[30]=H,n[31]=z,n[32]=j,n[33]=K):K=n[33],K}function C(e){switch(e){case"warning_screens":case"media_label":case"post_label":return e;default:return null}}function b(e){var t=Object.keys(_).find(function(t){return t===e.toUpperCase()});return t}l.checkIsInformedTreatmentVisible=g,l.getEventTitle=h,l.MWInformedTreatment=y}),226);
__d("MWXIconHd",["MWXSvgIcon","SVGIcon","cr:22362","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22362")),r("gkx")("23219"));l.default=e}),98);
__d("MWXMessageBubbleCornerStyles.react",[],(function(t,n,r,o,a,i,l){"use strict";var e={flatBottom:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0},flatTop:{borderStartEndRadius:"x1ga7v0g",borderStartStartRadius:"x15mokao",$$css:!0},rounded:{borderStartStartRadius:"xaymx6s",borderStartEndRadius:"x1lu5o8o",borderEndEndRadius:"x1ou5ly4",borderEndStartRadius:"xofb2d2",$$css:!0}},s={connectBottom:{borderEndStartRadius:"x1pczhz8",$$css:!0},connectTop:{borderStartStartRadius:"xjwep3j",$$css:!0}},u={connectBottom:{borderEndEndRadius:"x1wcsgtt",$$css:!0},connectTop:{borderStartEndRadius:"x1t39747",$$css:!0}};function c(t){var n,r,o,a,i,l=(n=t==null?void 0:t.align)!=null?n:"left",c=(r=t==null?void 0:t.connectBottom)!=null?r:!1,d=(o=t==null?void 0:t.connectTop)!=null?o:!1,m=(a=t==null?void 0:t.flatten)!=null?a:"none",p=(i=t==null?void 0:t.corners)!=null?i:"round",_=l==="right"?u:s;return[p==="round"&&e.rounded,d&&_.connectTop,c&&_.connectBottom,(m==="all"||m==="bottom")&&e.flatBottom,(m==="all"||m==="top")&&e.flatTop]}l.getMWXBubbleCornerStyles=c}),98);
__d("MWXAspectRatioContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={position:"x1n2onr6",width:"xh8yej3",$$css:!0},c={child:{height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},childInner:{maxHeight:"xmz0i5r",maxWidth:"x193iq5w",$$css:!0},flex:{display:"x78zum5",maxWidth:"x193iq5w",$$css:!0},inner:function(t){return[u,{paddingBottom:t!=null?"xjqpyvm":t,$$css:!0},{"--x-paddingBottom":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},outer:function(t,n,r){return[{maxHeight:r!=null?"x1jols5v":r,maxWidth:n!=null?"xf68679":n,width:t!=null?"x5lhr3w":t,$$css:!0},{"--x-maxHeight":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(r),"--x-maxWidth":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(n),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}};function d(e){var t=o("react-compiler-runtime").c(22),n=e.children,r=e.height,a=e.maxHeight,i=e.maxWidth,l=e.width,u=l/r,d=i!=null&&a!=null?"min("+i+"px, "+a*u+"px)":a!=null?a*u+"px":i,m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=[c.flex],t[0]=m):m=t[0];var p;t[1]!==a||t[2]!==d||t[3]!==l?(p=c.outer(l,d!=null?d:"initial",a!=null?a:"initial"),t[1]=a,t[2]=d,t[3]=l,t[4]=p):p=t[4];var _;t[5]!==p?(_=[p],t[5]=p,t[6]=_):_=t[6];var f;t[7]!==u?(f=c.inner(100/u+"%"),t[7]=u,t[8]=f):f=t[8];var g;t[9]!==f?(g=[f],t[9]=f,t[10]=g):g=t[10];var h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=[c.child],t[11]=h):h=t[11];var y;t[12]!==n?(y=n==null?void 0:n(c.childInner),t[12]=n,t[13]=y):y=t[13];var C;t[14]!==y?(C=s.jsx(o("react-strict-dom").html.div,{style:h,children:y}),t[14]=y,t[15]=C):C=t[15];var b;t[16]!==g||t[17]!==C?(b=s.jsx(o("react-strict-dom").html.div,{style:g,children:C}),t[16]=g,t[17]=C,t[18]=b):b=t[18];var v;return t[19]!==_||t[20]!==b?(v=s.jsx(o("react-strict-dom").html.div,{style:m,children:s.jsx(o("react-strict-dom").html.div,{style:_,children:b})}),t[19]=_,t[20]=b,t[21]=v):v=t[21],v}l.default=d}),98);
__d("MWXMessageImage.react",["BaseImage.react","FDSBlurredBackgroundImage.react","MWXAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","height","maxHeight","maxWidth","renderImagePlaceholder","shouldBlur","width","xstyle"],s,u,c=u||(u=o("react")),d={container:function(t){return[{maxWidth:t!=null?"xf68679":t,$$css:!0},{"--x-maxWidth":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},image:{display:"x1lliihq",maxWidth:"x193iq5w",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(24),a,i,l,u,m,p,_,f,g;n[0]!==t?(a=t.children,i=t.height,u=t.maxHeight,m=t.maxWidth,p=t.renderImagePlaceholder,_=t.shouldBlur,f=t.width,g=t.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=p,n[7]=_,n[8]=f,n[9]=g):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],p=n[6],_=n[7],f=n[8],g=n[9]);var h;if(n[10]!==i||n[11]!==l||n[12]!==u||n[13]!==m||n[14]!==p||n[15]!==_||n[16]!==f){var y;h=f==null||i==null?c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(d.container(m)),{children:(y=p==null?void 0:p())!=null?y:c.jsx(r("BaseImage.react"),babelHelpers.extends({},l,{objectFit:"contain",style:{maxHeight:u+"px"},xstyle:d.image}))})):c.jsx(r("MWXAspectRatioContainer.react"),{height:i,maxHeight:u,maxWidth:m,width:f,children:function(t){var e;return(e=p==null?void 0:p())!=null?e:_!==!0?c.jsx(r("BaseImage.react"),babelHelpers.extends({height:i,width:f,xstyle:t},l)):c.jsx(r("FDSBlurredBackgroundImage.react"),babelHelpers.extends({xstyle:t},l))}}),n[10]=i,n[11]=l,n[12]=u,n[13]=m,n[14]=p,n[15]=_,n[16]=f,n[17]=h}else h=n[17];var C=h,b;n[18]!==g?(b=(s||(s=r("stylex"))).props(g),n[18]=g,n[19]=b):b=n[19];var v;return n[20]!==a||n[21]!==C||n[22]!==b?(v=c.jsxs("div",babelHelpers.extends({},b,{children:[C,a]})),n[20]=a,n[21]=C,n[22]=b,n[23]=v):v=n[23],v}l.default=m}),98);
__d("MWPMessageListImage.react",["LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MWInformedTreatment.react","MWLSThread","MWXIconHd","MWXIconStrict.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXMessageImage.react","MWXPressable.react","MWXThreadThemeColor","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","stylex","useMWInformTreatmentFalcoEventLogger","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["attachment","connectBottom","connectTop","outgoing","overlayAlign","overlayHeight","overlayWidth","xstyle"],s,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useState,f={left:"",right:"",position:"x10l6tqk",top:"xuivejd",$$css:!0},g={height:"x16ye13r",insetInlineStart:"xbudbmw",left:"",right:"",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",width:"x5lhr3w",$$css:!0},h={appAttr:{alignItems:"x6s0dn4",borderBottomWidth:"xso031l",borderTopColor:"x1pdss0j",borderInlineEndColor:"x1593r2a",borderBottomColor:"x81c4ja",borderInlineStartColor:"xewde0t",borderInlineEndWidth:"x1lun4ml",borderInlineStartWidth:"xpilrb4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",boxSizing:"x9f619",display:"x78zum5",lineHeight:"x1rfph6h",paddingTop:"x1iorvi4",paddingInlineEnd:"x1icxu4v",paddingBottom:"xjkvuk6",paddingInlineStart:"x25sj25",$$css:!0},appIcon:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xlup9mm",marginInlineEnd:"xbelrpt",objectFit:"x19kjcj4",width:"x1kky2od",$$css:!0},hdOverlay:function(t){return[f,{insetInlineEnd:(t==="end"?"10px":void 0)!=null?"xqxgn94":t==="end"?"10px":void 0,insetInlineStart:(t==="start"?"10px":void 0)!=null?"x1lxsm33":t==="start"?"10px":void 0,$$css:!0},{"--x-insetInlineEnd":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t==="end"?"10px":void 0),"--x-insetInlineStart":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t==="start"?"10px":void 0)}]},hdOverlayContainer:function(t,n){return[g,{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t!=null?t+"px":"100%"),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(n!=null?n+"px":"100%")}]},pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"xs83m0k",justifyContent:"xl56j7k",maxHeight:"xmz0i5r",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function y(e){var t=o("react-compiler-runtime").c(18),n=e.attachment,a=e.connectBottom,i=e.connectTop,l=e.outgoing,u=e.xstyle,c=l===!0?"right":"left",m,p,_,f;if(t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==c||t[4]!==u){_=Symbol.for("react.early_return_sentinel");e:{var g=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:c,connectBottom:a,connectTop:i,flatten:"top"}),y=n;if(m=y.attributionAppName,m==null){_=null;break e}f=y.attributionAppIcon,p=(s||(s=r("stylex"))).props(h.appAttr,u,g)}t[0]=n,t[1]=a,t[2]=i,t[3]=c,t[4]=u,t[5]=m,t[6]=p,t[7]=_,t[8]=f}else m=t[5],p=t[6],_=t[7],f=t[8];if(_!==Symbol.for("react.early_return_sentinel"))return _;var C;t[9]!==f?(C=f!=null?d.jsx(r("MWXImage.react"),{alt:"",src:f,xstyle:h.appIcon}):null,t[9]=f,t[10]=C):C=t[10];var b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b={className:"xzsf02u x1nxh6w3 x13faqbe"},t[11]=b):b=t[11];var v;t[12]!==m?(v=d.jsx("span",babelHelpers.extends({},b,{children:m})),t[12]=m,t[13]=v):v=t[13];var S;return t[14]!==p||t[15]!==C||t[16]!==v?(S=d.jsxs("div",babelHelpers.extends({},p,{children:[C,v]})),t[14]=p,t[15]=C,t[16]=v,t[17]=S):S=t[17],S}function C(e){var t=o("react-compiler-runtime").c(11),n=e.attachment,a=e.overlayAlign,i=e.overlayHeight,l=e.overlayWidth,u=a===void 0?"end":a,c=n,m=c.isHd===!0;if(!m)return null;var p;t[0]!==i||t[1]!==l?(p=(s||(s=r("stylex"))).props(h.hdOverlayContainer(i,l)),t[0]=i,t[1]=l,t[2]=p):p=t[2];var _;t[3]!==u?(_=(s||(s=r("stylex"))).props(h.hdOverlay(u)),t[3]=u,t[4]=_):_=t[4];var f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(r("MWXIconStrict.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:r("MWXIconHd"),size:18}),t[5]=f):f=t[5];var g;t[6]!==_?(g=d.jsx("div",babelHelpers.extends({},_,{"data-testid":void 0,children:f})),t[6]=_,t[7]=g):g=t[7];var y;return t[8]!==p||t[9]!==g?(y=d.jsx("div",babelHelpers.extends({},p,{children:g})),t[8]=p,t[9]=g,t[10]=y):y=t[10],y}function b(e){var t,n=o("react-compiler-runtime").c(26),a=e.attachment,l=e.height,s=e.setIsBlurredImageVisible,c=e.width,m=(u||(u=r("useReStore")))(),p;n[0]!==a.messageId||n[1]!==m.tables.messages?(p=function(){return o("ReQL").fromTableAscending(m.tables.messages.index("messageId")).getKeyRange(a.messageId)},n[0]=a.messageId,n[1]=m.tables.messages,n[2]=p):p=n[2];var _;n[3]!==a.messageId||n[4]!==m?(_=[a.messageId,m],n[3]=a.messageId,n[4]=m,n[5]=_):_=n[5];var f=o("ReQLSuspense").useFirstExn(p,_,i.id+":170"),g;n[6]!==f?(g={message:f},n[6]=f,n[7]=g):g=n[7];var y=r("useMWInformTreatmentFalcoEventLogger")(g),C=(t=o("MWLSThread").useThread(a.threadKey,v))!=null?t:{isSecureThread:!1,threadType:null},b=C.isSecureThread,S=C.threadType,R=a.gatingTitle,L=a.gatingType,E=a.previewUrl,k;n[8]!==L||n[9]!==b?(k=b?o("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(L,10)):L,n[8]=L,n[9]=b,n[10]=k):k=n[10];var I=k,T=o("MWInformedTreatment.react").checkIsInformedTreatmentVisible(R,I,E,S);if(I==null||R==null||!T)return null;var D=I==="warning_screens",x=l+"px",$=c!=null?c+"px":"100%",P;n[11]!==x||n[12]!==$?(P={height:x,width:$},n[11]=x,n[12]=$,n[13]=P):P=n[13];var N;n[14]!==a.messageId||n[15]!==R||n[16]!==I||n[17]!==E||n[18]!==P?(N=d.jsx(o("MWInformedTreatment.react").MWInformedTreatment,{dimension:P,gatingTitle:R,gatingType:I,mediaRenderQpl:null,messageId:a.messageId,previewUrl:E}),n[14]=a.messageId,n[15]=R,n[16]=I,n[17]=E,n[18]=P,n[19]=N):N=n[19];var M=N,w;return n[20]!==R||n[21]!==D||n[22]!==M||n[23]!==y||n[24]!==s?(w=D?d.jsx(r("MWXPressable.react"),{onPress:function(){var e=o("MWInformedTreatment.react").getEventTitle(R);s(!0),e!=null&&y("tap_to_reveal",{name:e,type:"warning_screens"})},overlayRadius:"normal",xstyle:h.pressable,children:M}):M,n[20]=R,n[21]=D,n[22]=M,n[23]=y,n[24]=s,n[25]=w):w=n[25],w}function v(e){return{isSecureThread:o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),threadType:e.threadType}}function S(t){var n,a=o("react-compiler-runtime").c(38),i,l,s,u,c,m,p,f,g;a[0]!==t?(i=t.attachment,l=t.connectBottom,s=t.connectTop,c=t.outgoing,m=t.overlayAlign,p=t.overlayHeight,f=t.overlayWidth,g=t.xstyle,u=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=u,a[5]=c,a[6]=m,a[7]=p,a[8]=f,a[9]=g):(i=a[1],l=a[2],s=a[3],u=a[4],c=a[5],m=a[6],p=a[7],f=a[8],g=a[9]);var v=i.attributionAppName!=null,S=c===!0?"right":"left",L=v===!0?"bottom":"none",E;a[10]!==l||a[11]!==s||a[12]!==S||a[13]!==L?(E=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:S,connectBottom:l,connectTop:s,flatten:L}),a[10]=l,a[11]=s,a[12]=S,a[13]=L,a[14]=E):E=a[14];var k=E,I=_(!1),T=I[0],D=I[1],x=(n=o("MWLSThread").useThread(i.threadKey,R))!=null?n:!1,$=r("gkx")("179"),P=i.gatingTitle==="misinformation"||i.gatingTitle==="misleading_news"||i.gatingTitle==="missing_context"||i.gatingTitle==="missing_context"||i.gatingTitle==="altered_media"||i.gatingTitle==="false_news",N=P&&$,M=!T&&i.gatingTitle!=null&&i.gatingType!=null&&x&&!N,w;a[15]!==i||a[16]!==u?(w=function(){var e=u,t=e.height,n=e.maxHeight,r=e.maxWidth,o=e.width;return d.jsx(b,{attachment:i,height:t!=null?Math.min(t,n):n,setIsBlurredImageVisible:D,width:o!=null&&r!=null?Math.min(o,r):o!=null?o:r})},a[15]=i,a[16]=u,a[17]=w):w=a[17];var A=w,F=M?A:void 0,O;a[18]!==k||a[19]!==g?(O=[h.root,g,k],a[18]=k,a[19]=g,a[20]=O):O=a[20];var B;a[21]!==i||a[22]!==l||a[23]!==s||a[24]!==c||a[25]!==g?(B=d.jsx(y,{attachment:i,connectBottom:l,connectTop:s,outgoing:c,xstyle:g}),a[21]=i,a[22]=l,a[23]=s,a[24]=c,a[25]=g,a[26]=B):B=a[26];var W;a[27]!==i||a[28]!==m||a[29]!==p||a[30]!==f?(W=d.jsx(C,{attachment:i,overlayAlign:m,overlayHeight:p,overlayWidth:f}),a[27]=i,a[28]=m,a[29]=p,a[30]=f,a[31]=W):W=a[31];var q;return a[32]!==u||a[33]!==F||a[34]!==O||a[35]!==B||a[36]!==W?(q=d.jsxs(r("MWXMessageImage.react"),babelHelpers.extends({renderImagePlaceholder:F,xstyle:O},u,{children:[B,W]})),a[32]=u,a[33]=F,a[34]=O,a[35]=B,a[36]=W,a[37]=q):q=a[37],q}function R(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)||o("LSMessagingThreadTypeUtil").isPublicCMThread(e.threadType)}l.MWPMessageListImageAppAttribution=y,l.MWPMessageListImageHdWatermark=C,l.InformedTreatment=b,l.MWPMessageListImage=S}),98);
__d("MWV2AttachmentLoadingPlaceholder.react",["InteractionTracingMetrics","MWXAspectRatioContainer.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(21),n=e.connectBottom,a=e.connectTop,i=e.descriptionForLogging,l=e.hasAppAttribution,d=e.hasCornerStyles,m=e.height,p=e.maxHeight,_=e.maxWidth,f=e.mediaRenderQpl,g=e.outgoing,h=e.width,y=e.xstyle,C=d===void 0?!0:d,b=p===void 0?200:p,v=_===void 0?480:_,S,R;if(t[0]!==i||t[1]!==m||t[2]!==f||t[3]!==h?(S=function(){var e={string:{call_site:i}};return h!=null&&m!=null?f==null||f.addPoint("render-loading-placeholder",e):f==null||f.addPoint("render-loading-placeholder-null-dimensions",e),r("InteractionTracingMetrics").currentInteractionLogger().forEach(function(e){r("InteractionTracingMetrics").addMarkerPoint(e.traceId,"render-attachment-loading-placeholder","AppTiming",void 0,{call_site:i})}),function(){f==null||f.addPoint("unmount-loading-placeholder",e),r("InteractionTracingMetrics").currentInteractionLogger().forEach(function(e){r("InteractionTracingMetrics").addMarkerPoint(e.traceId,"unmount-attachment-loading-placeholder","AppTiming",void 0,{call_site:i})})}},R=[m,f,h,i],t[0]=i,t[1]=m,t[2]=f,t[3]=h,t[4]=S,t[5]=R):(S=t[4],R=t[5]),u(S,R),h==null||m==null)return null;var L=g===!0?"right":"left",E=l===!0?"bottom":"none",k;t[6]!==n||t[7]!==a||t[8]!==L||t[9]!==E?(k=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:L,connectBottom:n,connectTop:a,flatten:E}),t[6]=n,t[7]=a,t[8]=L,t[9]=E,t[10]=k):k=t[10];var I=k,T;t[11]!==I||t[12]!==C||t[13]!==y?(T=function(t){return s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[t,c.glimmer,C===!0&&I,y]})},t[11]=I,t[12]=C,t[13]=y,t[14]=T):T=t[14];var D;return t[15]!==m||t[16]!==b||t[17]!==v||t[18]!==T||t[19]!==h?(D=s.jsx("div",{"data-testid":void 0,children:s.jsx(r("MWXAspectRatioContainer.react"),{height:m,maxHeight:b,maxWidth:v,width:h,children:T})}),t[15]=m,t[16]=b,t[17]=v,t[18]=T,t[19]=h,t[20]=D):D=t[20],D}l.default=d}),98);
__d("appendParamToUrl",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=new URL(e);return r.searchParams.set(t,n),r.toString()}i.default=e}),66);
__d("useMWMediaViewerOpenQPLLogger",["qpl","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback,u=r("requireDeferred")("QPLUserFlow").__setRef("useMWMediaViewerOpenQPLLogger"),c=r("qpl")._(25298743,"1403"),d=6e3*10;function m(){var e=o("react-compiler-runtime").c(1),t=f,n=_,r=p,a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a={endCancel:r,endSuccess:n,startFlow:t},e[0]=a):a=e[0],a}function p(e){u.onReadyImmediately(function(t){t.endCancel(c,{cancelReason:e})})}function _(e){u.onReadyImmediately(function(t){t.endSuccess(c,{annotations:e})})}function f(e){var t=e.attachmentType,n=e.entryPoint,r=e.isSecure,o={attachmentType:t,entryPoint:n,isSecure:(r!=null?r:!1).toString()};u.onReadyImmediately(function(e){e.start(c,{annotations:{string:babelHelpers.extends({},o)},cancelOnUnload:!0,timeoutInMs:d})})}l.useMWMediaViewerOpenQPLLogger=m}),98);
__d("useMWV2FocusRowAfterClosingPushView",["MWV2MessageRowIsRowFocusedContext.react","react","react-compiler-runtime","useCometRouterState","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useLayoutEffect;function d(){var e=o("react-compiler-runtime").c(12),t=u(o("MWV2MessageRowIsRowFocusedContext.react").context),n=t.isDialogOpened,a=t.setIsDialogOpened,i=t.setFocused,l=r("useCometRouterState")(),s;if(e[0]!==l){if(l==null)s=0;else{var d=l.pushViewStack;s=d==null?0:d.length}e[0]=l,e[1]=s}else s=e[1];var _=r("usePrevious")(s),f;e[2]!==n||e[3]!==s||e[4]!==_||e[5]!==i||e[6]!==a?(f=function(){if(_!=null){n===!0&&_>0&&s===0&&(a(p),i(m));return}},e[2]=n,e[3]=s,e[4]=_,e[5]=i,e[6]=a,e[7]=f):f=e[7];var g;return e[8]!==n||e[9]!==s||e[10]!==_?(g=[n,_,s],e[8]=n,e[9]=s,e[10]=_,e[11]=g):g=e[11],c(f,g),a}function m(){return!0}function p(){return!1}l.default=d}),98);
__d("MWV2MediaViewerContainer.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(12),n=e.actions,r=e.children,a=e.fallbackHeader,i=e.hideActions,l=i===void 0?!1:i,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u={className:"x1qjc9v5 xal61yo x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x6ikm8r x10wlt62 x1n2onr6 x87ps6o xh8yej3 x1uvtmcs"},t[0]=u):u=t[0];var c;t[1]!==l?(c={0:{className:"xdg88n9 x10l6tqk x1tk7jg1"},1:{className:"xdg88n9 x10l6tqk x1tk7jg1 x1s85apg"}}[!!l<<0],t[1]=l,t[2]=c):c=t[2];var d;t[3]!==n||t[4]!==c?(d=s.jsx("div",babelHelpers.extends({},c,{children:n})),t[3]=n,t[4]=c,t[5]=d):d=t[5];var m;t[6]!==a?(m=a!=null&&s.jsx("div",{className:"xzwoauc x10l6tqk xfr5jun",children:a}),t[6]=a,t[7]=m):m=t[7];var p;return t[8]!==r||t[9]!==d||t[10]!==m?(p=s.jsxs("div",babelHelpers.extends({},u,{"data-testid":void 0,children:[r,d,m]})),t[8]=r,t[9]=d,t[10]=m,t[11]=p):p=t[11],p}l.default=u}),98);
__d("MWV2MediaViewerActionButton.react",["MWXCircleButton.react","MWXTooltip.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(9),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l=r("gkx")("17009"),s;n[3]!==a||n[4]!==i?(s=u.jsx(r("MWXCircleButton.react"),babelHelpers.extends({size:l?40:36,type:l?"overlay":"dark-overlay"},a,{ref:i})),n[3]=a,n[4]=i,n[5]=s):s=n[5];var c;return n[6]!==a.label||n[7]!==s?(c=u.jsx(r("MWXTooltip.react"),{tooltip:a.label,children:s}),n[6]=a.label,n[7]=s,n[8]=c):c=n[8],c}l.default=c}),98);
__d("MWV2MediaViewerCloseControl.react",["fbt","MWV2MediaViewerActionButton.react","MWXIconCross","MWXRowItem.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Close");function d(e){var t=o("react-compiler-runtime").c(7),n=e.onClose,a;t[0]!==n?(a={0:{},1:{className:"xlshs6z"}}[(n==null)<<0],t[0]=n,t[1]=a):a=t[1];var i=n!=null?n:r("emptyFunction"),l;t[2]!==i?(l=u.jsx(r("MWV2MediaViewerActionButton.react"),{icon:r("MWXIconCross"),label:c,onPress:i}),t[2]=i,t[3]=l):l=t[3];var s;return t[4]!==a||t[5]!==l?(s=u.jsx(r("MWXRowItem.react"),{children:u.jsx("div",babelHelpers.extends({},a,{children:l}))}),t[4]=a,t[5]=l,t[6]=s):s=t[6],s}l.default=d}),226);
__d("MWV2MediaViewerControlsFallback.react",["MWV2MediaViewerCloseControl.react","MWXRow.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.onClose,a;return t[0]!==n?(a=s.jsx(r("MWXRow.react"),{paddingTop:0,spacing:8,children:s.jsx(r("MWV2MediaViewerCloseControl.react"),{onClose:n})}),t[0]=n,t[1]=a):a=t[1],a}l.default=u}),98);
__d("MWV2MediaViewerFallback.react",["MWV2MediaViewerContainer.react","MWV2MediaViewerControlsFallback.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(7),n=e.onClose,a=r("gkx")("17009"),i;t[0]!==n?(i=!a&&s.jsx(r("MWV2MediaViewerControlsFallback.react"),{onClose:n}),t[0]=n,t[1]=i):i=t[1];var l;t[2]!==n?(l=a&&s.jsx(r("MWV2MediaViewerControlsFallback.react"),{onClose:n}),t[2]=n,t[3]=l):l=t[3];var u;return t[4]!==i||t[5]!==l?(u=s.jsx(r("MWV2MediaViewerContainer.react"),{actions:i,fallbackHeader:l,children:null}),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}l.default=u}),98);
__d("useMWV2MediaViewerShowDialog",["JSResourceForInteraction","MWV2MediaViewerFallback.react","react","react-compiler-runtime","useMWXLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){return s.jsx(r("MWV2MediaViewerFallback.react"),{onClose:e})}c.displayName=c.name+" [from "+i.id+"]";function d(e){var t=o("react-compiler-runtime").c(8),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("useMWV2MediaViewerShowDialog"),t[0]=n):n=t[0];var a=r("useMWXLazyDialog")(n,c),i=a[0],l=a[1],s,d;t[1]!==e||t[2]!==l?(s=function(){e||l()},d=[l,e],t[1]=e,t[2]=l,t[3]=s,t[4]=d):(s=t[3],d=t[4]),u(s,d);var m;return t[5]!==l||t[6]!==i?(m=[i,l],t[5]=l,t[6]=i,t[7]=m):m=t[7],m}l.default=d}),98);
__d("XCometMessengerMediaControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/messenger_media/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("XCometMessengerPhotoControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/messenger_photo/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("useMWV2MediaViewerURL",["I64","Int64Hooks","LSIntEnum","MessagingAttachmentType","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","justknobx","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(3),a,i;return n[0]!==t?(a=function(){if(t==null)return null;var n=(e||(e=o("I64"))).equal(t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE));return n&&r("justknobx")._("1284")===!1?r("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:t.attachmentFbid,message_id:t.messageId,photo_ids:void 0}):r("XCometMessengerMediaControllerRouteBuilder").buildURL({attachment_id:t.attachmentFbid,message_id:t.messageId,thread_id:e.to_string(t.threadKey)})},i=[t],n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]),o("Int64Hooks").useMemoInt64(a,i)}l.default=u}),98);
__d("MWAnimatedImageThumbnailWithPlayButton.react",["fbt","$InternalEnum","CometHeroHoldTrigger.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWImageUtils","MAWThreadCutover","MWAnimatedImageControlsUtil","MWLSThreadDisplayContext","MWMessageListImageSizingUtils","MWPMessageListImage.react","MWV2AttachmentLoadingPlaceholder.react","MWV2LogMessageClick","MWVideoPlayerPlayButton.react","MWXAspectRatioContainer.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXPressable.react","appendParamToUrl","gkx","justknobx","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWMediaViewerOpenQPLLogger","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=e||(e=o("react")),m=e,p=m.useCallback,_=m.useEffect,f=m.useState,g=25,h={imageWithAppAttribution:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",bottom:"x1ey2m1c",position:"x1n2onr6",$$css:!0},wrapper:{display:"x1lliihq",$$css:!0},wrapperForAppAttribution:{marginBottom:"x1ibc7va",$$css:!0},wrapperReplyImage:{cursor:"x1ypdohk",$$css:!0}},y=n("$InternalEnum").Mirrored(["Composer","GIFPicker","MediaViewer","Thread"]);function C(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=d.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWAnimatedImageThumbnailWithPlayButton",children:d.jsx(b,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function b(e){var t,n,a=e.altText,i=e.connectBottom,l=e.connectTop,m=e.dbAttachment,g=e.entryPoint,C=e.gifPreviewUrl,b=e.isReplyImage,v=b===void 0?!1:b,S=e.isSecure,R=e.mediaRenderQpl,L=e.message,E=e.onPlay,k=e.onPress,I=e.outgoing,T=e.previewHeight,D=e.previewWidth,x=e.sourceURL,$=e.testid,P=r("useAsyncReStore")(),N=o("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting(),M=f(null),w=M[0],A=M[1],F=r("useMWV2MediaViewerURL")(m),O=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),B=o("MWMessageListImageSizingUtils").getMaxPreviewHeightAndWidth(S!=null?S:!0,O!=null?O:void 0,!1),W=B.maxHeight,q=B.maxWidth,U=p(function(){R==null||R.endSuccess({bool:{thumbnail_generated_for_gif:!0}})},[R]),V=p(function(){R==null||R.endFail("gif-thumbnail-render-failed")},[R]),H=m!=null&&m.previewUrl==null&&S!==!1?o("MAWAttachmentBlob.react").getAttachmentBlob_CausesSuspense(m,"gifToBlob",R):void 0,G=r("useMWV2FocusRowAfterClosingPushView")(),z=r("useMWV2MediaViewerShowDialog")(!1),j=z[0],K=o("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),Q=K.startFlow,X=g===y.Thread,Y=g===y.Composer,J=g===y.MediaViewer,Z=g===y.GIFPicker;_(function(){var e=null;async function t(){R==null||R.addPoint("gif-thumbnail-generation-started");var t=C;if(t==null)if(m==null&&x!=null)t=x;else try{(m==null?void 0:m.previewUrl)!=null?t=m==null?void 0:m.previewUrl:H!=null&&(t=H)}catch(e){return null}if(t==null)return null;var n=/^(?:data|blob):/.test(t);n||(t=r("appendParamToUrl")(t,"not-from-cache-please",""));var a=r("gkx")("12666"),i=await o("MAWImageUtils").generateGIFThumbnail(t,T,D,a);if(R==null||R.addPoint("gif-thumbnail-generation-completed"),i!=null){R==null||R.addPoint("gif-thumbnail-generation-completed-successfully");var l=new Blob([i.jpegThumbnail]);e=URL.createObjectURL(l),A(e)}}return t().catch(function(){R==null||R.endFail("gif-thumbnail-generation-failed"),A(null)}),function(){e!=null&&URL.revokeObjectURL(e)}},[m,C,R,T,D,x,H]);var ee=r("justknobx")._("3133"),te=o("MAWThreadCutover").useIsCutoverOpenThread(L==null?void 0:L.threadKey)&&ee,ne=S===!1&&!te&&X&&L!=null&&(u||(u=o("I64"))).gt(L.authorityLevel,(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").CLIENT_PARTIAL))?{passthroughProps:{origSrc:m==null?void 0:m.previewUrl},url:F}:void 0,re=function(){if(L!=null&&r("promiseDone")(P,function(e){o("MWV2LogMessageClick").log(e,L,28)}),Q({attachmentType:"IMAGE",entryPoint:"thread_view",isSecure:S}),G(function(){return!0}),m!=null&&(S===!0||te))return j({attachment:m},function(){})},oe=(m==null?void 0:m.attributionAppName)!=null,ae=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:I===!0?"right":"left",connectBottom:i,connectTop:l});if(T==null||D==null)return null;var ie=(t=m==null?void 0:m.accessibilitySummaryText)!=null?t:a,le=s._(/*BTDS*/"Tap to play GIF {gif_alt_text}",[s._param("gif_alt_text",(n=m==null?void 0:m.accessibilitySummaryText)!=null?n:a)]);if(X){var se;ie=s._(/*BTDS*/"Open GIF {gif_alt_text}",[s._param("gif_alt_text",(se=m==null?void 0:m.accessibilitySummaryText)!=null?se:a)])}else if(Z){var ue;ie=s._(/*BTDS*/"Send GIF {gif_alt_text}",[s._param("gif_alt_text",(ue=m==null?void 0:m.accessibilitySummaryText)!=null?ue:a)])}else if(J){var ce,de;ie=(ce=(de=m==null?void 0:m.accessibilitySummaryText)!=null?de:a)!=null?ce:s._(/*BTDS*/"GIF")}var me=v||J;return d.jsx(r("MWXPressable.react"),{"aria-label":ie,cursorDisabled:me,disabled:me,display:"block",linkProps:ne,onPress:me?void 0:X?re:k,testid:void 0,xstyle:[h.wrapper,oe&&h.wrapperForAppAttribution,v&&h.wrapperReplyImage],children:d.jsx(r("MWXAspectRatioContainer.react"),{height:T,maxHeight:X?W:T,maxWidth:X?q:D,width:D,children:function(t){var e;return d.jsxs(d.Fragment,{children:[w==null?d.jsxs(d.Fragment,{children:[d.jsx(r("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:i,connectTop:l,descriptionForLogging:"MAWSecureGIFAttachment.NoGIFThumbnail",hasAppAttribution:oe,hasCornerStyles:X,height:T,maxHeight:X?W:T,maxWidth:X?q:D,mediaRenderQpl:R,outgoing:I,width:D,xstyle:[t,X&&ae,oe&&h.imageWithAppAttribution]}),d.jsx(r("CometHeroHoldTrigger.react"),{description:"MAWSecureGIFAttachment.NoGIFThumbnail",hold:!0})]}):d.jsx(r("MWXImage.react"),{alt:(e=m==null?void 0:m.accessibilitySummaryText)!=null?e:a,height:T,onError:V,onLoad:U,src:w,width:D,xstyle:[t,X&&ae,oe&&h.imageWithAppAttribution]}),m!=null&&oe&&X&&d.jsx("div",{className:"x1f1lzrh x10l6tqk xh8yej3",children:d.jsx(o("MWPMessageListImage.react").MWPMessageListImageAppAttribution,{attachment:m,connectBottom:i,connectTop:l,outgoing:I})}),N===o("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.OFF&&d.jsx(r("MWVideoPlayerPlayButton.react"),{alt:le,isVisible:!0,onClick:v?void 0:E,size:v||Y?"SMALL":"LARGE"})]})}})})}b.displayName=b.name+" [from "+i.id+"]",l.AnimatedImageEntryPoint=y,l.MWAnimatedImageThumbnailWithPlayButton=C}),226);
__d("MWCMIsSubthreadContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=c({isSubthread:!1});function _(){return d(p)}function f(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=e.isSubthread,a,i;t[0]!==r?(i={isSubthread:r},t[0]=r,t[1]=i):i=t[1],a=i;var l=a,u;return t[2]!==n||t[3]!==l?(u=s.jsx(p.Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}l.useIsSubthreadContext=_,l.MWCMIsSubthreadContextProvider=f}),98);
__d("MWThumbnailDurationPill",["getFormattedTimestamp","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(7),n=e.spacing,a=e.videoDuration,i;t[0]!==n?(i={0:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xqo3gd x11dcrhx"},1:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xbfrwjf xxx7yvo"}}[(n==="TIGHT")<<0],t[0]=n,t[1]=i):i=t[1];var l;t[2]!==a?(l=r("getFormattedTimestamp")(a),t[2]=a,t[3]=l):l=t[3];var u;return t[4]!==i||t[5]!==l?(u=s.jsx("div",babelHelpers.extends({},i,{children:l})),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}l.default=u}),98);
__d("useVideoPlayerHasStartedSeekingSinceLastPlay",["VideoPlayerHooks","createVideoStateHook","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.stateHook;function m(){var e=o("react-compiler-runtime").c(5),t=d(!1),n=t[0],r=t[1],a=(s||(s=o("VideoPlayerHooks"))).useSeeking(),i=s.usePlaying(),l,c;return e[0]!==i||e[1]!==a||e[2]!==r?(l=function(){a&&!i&&r(!0),i&&r(!1)},c=[i,a,r],e[0]=i,e[1]=a,e[2]=r,e[3]=l,e[4]=c):(l=e[3],c=e[4]),u(l,c),n}l.default=m}),98);
__d("useMWVideoPlayerBigPlayButtonOverlay.react",["MWVideoPlayerPlayButton.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerHasStartedPlayingAtLeastOnce","useVideoPlayerHasStartedSeekingSinceLastPlay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(14),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.buttonSize,l=a.forceVisible,c=a.overrideInteraction,d=a.shouldUnmute,m=i===void 0?"large":i,p=(s||(s=o("VideoPlayerHooks"))).usePaused(),_=s.useEnded(),f=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),g=r("useVideoPlayerHasStartedSeekingSinceLastPlay")(),h=s.useLastMuteReason(),y=s.useController(),C;t[2]!==y||t[3]!==h||t[4]!==d?(C=function(){y.play("user_initiated"),d===!0&&h!=="user_initiated"&&y.setMuted(!1,"product_initiated")},t[2]=y,t[3]=h,t[4]=d,t[5]=C):C=t[5];var b=C,v=c!=null?c.handler:b,S=l===!0||l===!1?l:!f&&p,R=m==="small"?"SMALL":"LARGE",L=_&&!g?"REPLAY":"PLAY",E;t[6]!==S||t[7]!==v||t[8]!==R||t[9]!==L?(E=u.jsx(r("MWVideoPlayerPlayButton.react"),{isVisible:S,onClick:v,size:R,type:L}),t[6]=S,t[7]=v,t[8]=R,t[9]=L,t[10]=E):E=t[10];var k=E,I;return t[11]!==k||t[12]!==S?(I={bigPlayButtonElement:k,bigPlayButtonIsVisible:S},t[11]=k,t[12]=S,t[13]=I):I=t[13],I}l.default=d}),98);
__d("MWChatVideoPlayerControls.react",["MWThumbnailDurationPill","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerFullscreenControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerScrubber.react","VideoPlayerVolumeControl.react","react","react-compiler-runtime","useMWVideoPlayerBigPlayButtonOverlay.react","useVideoPlayerDefaultControlsVisibility","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(3),n=e.children,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={className:"x12y6twl x1g0ag68"},t[0]=r):r=t[0];var a;return t[1]!==n?(a=u.jsx("span",babelHelpers.extends({},r,{children:n})),t[1]=n,t[2]=a):a=t[2],a}function d(e){var t=o("react-compiler-runtime").c(15),n=e.hideExpandButton,a=e.isMediaViewer,i=r("useVideoPlayerDefaultControlsVisibility")(),l=i.isControlsVisible,d=i.onUserInteraction,m=(s||(s=o("VideoPlayerHooks"))).usePaused(),p;t[0]!==m?(p={forceVisible:m},t[0]=m,t[1]=p):p=t[1];var _=r("useMWVideoPlayerBigPlayButtonOverlay.react")(p),f=_.bigPlayButtonElement,g=s.useIsFullscreen(),h=s.useDuration(),y=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),C=s.usePlaying(),b=s.useEnded(),v=!y&&!C||b,S;t[2]!==h||t[3]!==n||t[4]!==g||t[5]!==a||t[6]!==d||t[7]!==v?(S=g?u.jsxs(u.Fragment,{children:[u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[u.jsx(r("VideoPlayerPlaybackControl.react"),{}),u.jsx(r("VideoPlayerPlaybackTimer.react"),{})]}),u.jsx(o("VideoPlayerControlsGroups.react").Expanded,{children:u.jsx(r("VideoPlayerScrubber.react"),{onUserInteraction:d})}),u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[u.jsx(r("VideoPlayerFullscreenControl.react"),{onUserInteraction:d}),u.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:d})]})]}):v?u.jsx(r("MWThumbnailDurationPill"),{spacing:"WIDE",videoDuration:h}):u.jsxs(u.Fragment,{children:[u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[a===!0?u.jsx(r("VideoPlayerPlaybackTimer.react"),{}):null,u.jsx(c,{children:u.jsx(r("VideoPlayerPlaybackControl.react"),{})})]}),u.jsx(o("VideoPlayerControlsGroups.react").Expanded,{children:u.jsx(r("VideoPlayerScrubber.react"),{onUserInteraction:d})}),u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[n?null:u.jsx(c,{children:u.jsx(r("VideoPlayerFullscreenControl.react"),{onUserInteraction:d})}),u.jsx(c,{children:u.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:d})})]})]}),t[2]=h,t[3]=n,t[4]=g,t[5]=a,t[6]=d,t[7]=v,t[8]=S):S=t[8];var R;t[9]!==l||t[10]!==S?(R=u.jsx(r("VideoPlayerControlsContainerOverlay.react"),{isVisible:l,children:S}),t[9]=l,t[10]=S,t[11]=R):R=t[11];var L=R,E;return t[12]!==f||t[13]!==L?(E=u.jsxs(u.Fragment,{children:[f,L]}),t[12]=f,t[13]=L,t[14]=E):E=t[14],E}l.default=d}),98);
__d("MWSetupMediaRenderQpl.react",["FBLogger","VideoPlayerHooks","performanceAbsoluteNow","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useEffect,m=c.useRef;function p(t){var n=o("react-compiler-runtime").c(5),a=t.context,i=t.mediaRenderQpl,l=(u||(u=o("VideoPlayerHooks"))).useController(),s=m(),c,p;return n[0]!==a||n[1]!==i||n[2]!==l?(c=function(){i==null||i.addPoint("setup-video-media-render-qpl",{string:{context:a}});var t=function(){var t,n=l.getCurrentState();if(n.error!=null){var o,u=n.error.errorName,c=n.error.errorType,d=n.error.errorMessageFormat+" - "+n.error.errorMessageParams.join(",");i==null||i.endFail("load-video-error",{string:{video_error_message:d,video_error_name:u,video_error_type:c}}),r("FBLogger")("messenger_web_media","load-video-error").warn("%s Video Player Error: %s",a,d),(o=s.current)==null||o.remove()}var m=n.domEventsLatestPerfMs.loadeddata!=null&&n.domEventsLatestPerfMs.loadeddata>0;m&&(i==null||i.addPoint("video-state-loaded-data"));var p=n.domEventsLatestPerfMs.loadedmetadata!=null&&n.domEventsLatestPerfMs.loadedmetadata>0;p&&(i==null||i.addPoint("video-state-loaded-metadata"));var _=(t=l.internal_getStateMachineState())==null?void 0:t.uncontrolledState,f=_==null?void 0:_.videoElementReadyState;f!=null&&f>0&&(i==null||i.addPoint("video-state-ready-state",{int:{ready_state:f}}));var g=n.domEventsLatestPerfMs.canplay!=null&&n.domEventsLatestPerfMs.canplay>0;if(g){var h=(e||(e=r("performanceAbsoluteNow")))();i==null||i.addPoint("video-state-can-play"),r("setTimeout")(function(){var e;i==null||i.endSuccess(void 0,h),(e=s.current)==null||e.remove()},500)}};return s.current=l.subscribe(function(){t()}),t(),function(){var e;(e=s.current)==null||e.remove()}},p=[a,i,l],n[0]=a,n[1]=i,n[2]=l,n[3]=c,n[4]=p):(c=n[3],p=n[4]),d(c,p),null}l.default=p}),98);
__d("MWVideoPlayerControllerContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({ref:{current:null}});l.default=u}),98);
__d("MWChatVideoPlayer.react",["CometProductAttribution","CometVideoPlayerLoggingConfigForMWChat","GraphQLVideoAutoplayGatingResult","MWChatVideoAutoplaySettingContext","MWChatVideoPlayerControls.react","MWSetupMediaRenderQpl.react","MWVideoPlayerControllerContext.react","VideoAutoplayLocalScopeProvider.react","VideoPlayerAutoplayRulesProvider","VideoPlayerDefaultControls.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerSurface.react","VideoPlayerX.react","computeAspectRatio","getVideoPlayerAutoplayProps","react","react-compiler-runtime","useVideoPlayerClickToPauseInteraction","useVideoPlayerClickToPlayInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useEffect,p={link_context:null,navChainContent:null,rootName:"MWChatMediaRoot.react",tap_point:"unexpected",tracePolicy:"comet.sharedmediaviewer.media",trackingNodes:null},_=-1,f=o("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("gif");function g(e){var t=o("react-compiler-runtime").c(10),n=e.controls,a=e.hideExpandButton,i=e.isMediaViewer,l=e.shouldForcePauseOnClick,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c={shouldUnmute:!0},t[0]=c):c=t[0];var d=r("useVideoPlayerClickToPlayInteraction")(c),m=r("useVideoPlayerClickToPauseInteraction")(),p=(s||(s=o("VideoPlayerHooks"))).usePaused(),_=p&&!l?d:m,f;t[1]!==_?(f=u.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{pressInteraction:_}),t[1]=_,t[2]=f):f=t[2];var g;t[3]!==n||t[4]!==a||t[5]!==i?(g=h(n,a,i),t[3]=n,t[4]=a,t[5]=i,t[6]=g):g=t[6];var y;return t[7]!==f||t[8]!==g?(y=u.jsxs(u.Fragment,{children:[f,g]}),t[7]=f,t[8]=g,t[9]=y):y=t[9],y}var h=function(t,n,o){switch(t){case"mwchat":return u.jsx(r("MWChatVideoPlayerControls.react"),{hideExpandButton:n===!0,isMediaViewer:o===!0});case"default":return u.jsx(r("VideoPlayerDefaultControls.react"),{});case"none":return null;default:return null}},y=function(t){return t!=null?function(e){return{objectFit:t}}:null};function C(e){var t=e.children,n=(s||(s=o("VideoPlayerHooks"))).useController(),a=d(r("MWVideoPlayerControllerContext.react"));return m(function(){return a.ref.current=n,function(){a.ref.current=null}},[a,n]),t}C.displayName=C.name+" [from "+i.id+"]";function b(e){var t=o("react-compiler-runtime").c(47),n=e.autoPlaySetting,a=e.controls,i=e.errorBoundaryFallback,l=e.fbid,s=e.gifPlayback,c=e.hdSrc,d=e.hideExpandButton,h=e.initialForceHD,b=e.isMediaViewer,v=e.loopCount,S=e.mediaRenderQpl,R=e.originalHeight,L=e.originalWidth,E=e.pixelsFit,k=e.sdSrc,I=e.shouldForcePauseOnClick,T=e.startTimestamp,D=e.volumeSetting,x=o("MWChatVideoAutoplaySettingContext").useMWChatVideoAutoplaySetting(),$=h!=null?h:!1,P;t[0]!==c||t[1]!==k||t[2]!==$?(P=o("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:c,hdSrcPreferred:$,sdSrc:k}),t[0]=c,t[1]=k,t[2]=$,t[3]=P):P=t[3];var N=P,M,w;if(t[4]!==N||t[5]!==S?(M=function(){S==null||S.addPoint("render-chat-video-player"),N instanceof Error&&(S==null||S.endFail("load-video-player-error",{string:{player_implementation_error_message:N.message,player_implementation_error_name:N.name}}))},w=[N,S],t[4]=N,t[5]=S,t[6]=M,t[7]=w):(M=t[6],w=t[7]),m(M,w),N instanceof Error){var A;return t[8]!==i?(A=i==null?void 0:i(),t[8]=i,t[9]=A):A=t[9],A}var F;t[10]!==N?(F=[{Component:r("VideoPlayerProgressiveImplementationV2.react"),data:N,typename:"VideoPlayerProgressiveImplementation"}],t[10]=N,t[11]=F):F=t[11];var O=F,B=s===!0?"gif_allowed":"unknown",W=n!=null?n:x,q;t[12]!==B||t[13]!==W?(q=r("getVideoPlayerAutoplayProps")(o("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(B,W,!0),"respect_user_settings",null),t[12]=B,t[13]=W,t[14]=q):q=t[14];var U=q,V;t[15]!==R||t[16]!==L?(V=r("computeAspectRatio")(L,R),t[15]=R,t[16]=L,t[17]=V):V=t[17];var H=V,G;t[18]===Symbol.for("react.memo_cache_sentinel")?(G=o("CometVideoPlayerLoggingConfigForMWChat").createCometVideoPlayerLoggingConfigForMWChat({withMWChatSNAPLGK:!0}),t[18]=G):G=t[18];var z=v!=null?v:_,j;t[19]===Symbol.for("react.memo_cache_sentinel")?(j={v2:[o("CometProductAttribution").getProductAttributionEntryV2(p)]},t[19]=j):j=t[19];var K;t[20]!==E?(K=y(E),t[20]=E,t[21]=K):K=t[21];var Q;t[22]!==S?(Q=u.jsx(r("MWSetupMediaRenderQpl.react"),{context:"MWChat",mediaRenderQpl:S}),t[22]=S,t[23]=Q):Q=t[23];var X=s===!0?"none":a,Y=d===!0,J=b===!0,Z;t[24]!==I||t[25]!==X||t[26]!==Y||t[27]!==J?(Z=u.jsx(C,{children:u.jsx(g,{controls:X,hideExpandButton:Y,isMediaViewer:J,shouldForcePauseOnClick:I})}),t[24]=I,t[25]=X,t[26]=Y,t[27]=J,t[28]=Z):Z=t[28];var ee;t[29]!==Q||t[30]!==Z?(ee=u.jsxs(r("VideoPlayerSurface.react"),{children:[Q,Z]}),t[29]=Q,t[30]=Z,t[31]=ee):ee=t[31];var te;t[32]!==i||t[33]!==l||t[34]!==O||t[35]!==T||t[36]!==G||t[37]!==z||t[38]!==K||t[39]!==ee||t[40]!==H||t[41]!==U||t[42]!==D?(te=u.createElement(r("VideoPlayerX.react"),babelHelpers.extends({},U,{errorBoundaryFallback:i,implementations:O,key:l,loggingConfig:G,loopCount:z,playerOriginOverride:"messaging",portalingEnabled:!1,productAttribution:j,renderVideoPixelsFit:K,startTimestamp:T,subOrigin:"messenger_thread",videoFBID:l,videoPixelsAspectRatio:H,volumeSetting:D}),ee),t[32]=i,t[33]=l,t[34]=O,t[35]=T,t[36]=G,t[37]=z,t[38]=K,t[39]=ee,t[40]=H,t[41]=U,t[42]=D,t[43]=te):te=t[43];var ne=te,re;return t[44]!==ne||t[45]!==s?(re=s===!0?u.jsx(r("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:f,children:ne}):ne,t[44]=ne,t[45]=s,t[46]=re):re=t[46],re}l.default=b}),98);
__d("MWFDSChevronLeft.svg.react",["cr:21602"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21602")}),98);
__d("MWFDSChevronRight.svg.react",["cr:21604"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21604")}),98);
__d("MWFDSDownload.svg.react",["cr:21633"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21633")}),98);
__d("MWFDSEyeCross.svg.react",["cr:21641"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21641")}),98);
__d("MWFDSHd.svg.react",["cr:21679"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21679")}),98);
__d("MWFDSInfoCircle.svg.react",["cr:21686"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21686")}),98);
__d("MWFDSShare.svg.react",["cr:21777"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21777")}),98);
__d("MWMediaRenderQplUtils",["CurrentUser","E2EELinkPreviewXMADataType","I64","LSBitFlag","LSIntEnum","LSMessageContentType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingInitiatingSource","LSReplyMessageAttachmentType","LSXmaContentType","MAWLoggerUtils","MNLSXMALayoutType","MessagingAttachmentType","MessagingThreadType","QPLUserFlow","ServerTime","VisibilityAPI","VisibilityState","justknobx","mergeDeep","objectEntries","performanceAbsoluteNow","qpl","react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=d.useEffect,p=d.useLayoutEffect,_=d.useMemo,f=d.useRef,g=3600*24,h=3*g,y=7*g,C=2*y,b=4*y,v=r("qpl")._(25302828,"2195"),S=r("justknobx")._("2945"),R=1e3,L=r("objectEntries")(r("LSMessageContentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map),E=r("objectEntries")(r("LSReplyMessageAttachmentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function k(e){return I(e.displayedContentTypes)}function I(e){var t;if(o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),e)){var n;return(n=L.get(1024))!=null?n:"UNKNOWN"}return(t=L.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}function T(e){var t;return e==null?"UNKNOWN":(t=E.get((c||(c=o("I64"))).to_int32(e)))!=null?t:"UNKNOWN"}function D(e){var t;if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))t=(u||(u=o("LSIntEnum"))).ofNumber(16384);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))t=(u||(u=o("LSIntEnum"))).ofNumber(2);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))t=(u||(u=o("LSIntEnum"))).ofNumber(2);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)))t=(u||(u=o("LSIntEnum"))).ofNumber(4);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)))t=(u||(u=o("LSIntEnum"))).ofNumber(64);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)))t=(u||(u=o("LSIntEnum"))).ofNumber(64);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)))t=(u||(u=o("LSIntEnum"))).ofNumber(1024);else return"UNKNOWN";return I(t)}var x=r("objectEntries")(r("MessagingAttachmentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function $(e){return P(e.attachmentType)}function P(e){var t;return(t=x.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var N=r("objectEntries")(r("MessagingThreadType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function M(e){var t=e.threadType;return w(t)}function w(e){var t;return(t=N.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var A=r("objectEntries")(r("LSXmaContentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function F(e){var t;return(t=A.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var O=r("objectEntries")(r("LSMessagingInitiatingSource")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function B(e){var t;return e!=null&&(t=O.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var W=r("objectEntries")(r("E2EELinkPreviewXMADataType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function q(e){var t;return(t=W.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var U=r("objectEntries")(r("LSMessageReplySourceType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function V(e){var t;return(t=U.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var H=r("objectEntries")(r("MNLSXMALayoutType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function G(e){var t;return e==null?"UNKNOWN":(t=H.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var z=r("objectEntries")(r("LSMessageReplySourceTypeV2")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function j(e){var t;return(t=z.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}function K(t,n,a,i){var l=(e||(e=r("performanceAbsoluteNow")))(),s=function(o,a){r("QPLUserFlow").addPoint(t,"window_visibility_change_"+(a?"hidden":"visible"),{instanceKey:n}),a&&r("QPLUserFlow").addAnnotations(t,{bool:{window_was_hidden:!0}},{instanceKey:n})},u=function(t){var e=o("VisibilityAPI").canUseVisibilityAPI?o("VisibilityAPI").isVisibilityHidden():void 0,n={bool:{window_is_hidden_on_end:e}};return t!=null?r("mergeDeep")(t,n):n};return{addAnnotations:function(o){r("QPLUserFlow").addAnnotations(t,o,{instanceKey:n})},addPoint:function(o,a){r("QPLUserFlow").addPoint(t,o,{data:a,instanceKey:n})},endCancel:function(l){a!=null&&(a.current=!0);var i=(e||(e=r("performanceAbsoluteNow")))(),c=u();o("VisibilityState").unsubscribe(s),r("setTimeout")(function(){r("QPLUserFlow").endCancel(t,{annotations:c,cancelReason:l,instanceKey:n,timestamp:i})},R)},endFail:function(l,c){a!=null&&(a.current=!0);var i=(e||(e=r("performanceAbsoluteNow")))(),d=r("mergeDeep")(u(c),{string:{fail_reason:l}});o("VisibilityState").unsubscribe(s),r("setTimeout")(function(){r("QPLUserFlow").endFailure(t,"render-failure",{annotations:d,instanceKey:n,timestamp:i})},R)},endSuccess:function(l,c){a!=null&&(a.current=!0);var i=c!=null?c:(e||(e=r("performanceAbsoluteNow")))(),d=u(l);o("VisibilityState").unsubscribe(s),r("setTimeout")(function(){r("QPLUserFlow").endSuccess(t,{annotations:d,instanceKey:n,timestamp:i})},R)},getInstanceKey:function(){return n},start:function(u){var a=l,c=i!=null?i:{};if(u!=null&&u.isManualRetry===!0){var d;a=(e||(e=r("performanceAbsoluteNow")))(),c=r("mergeDeep")(c,{bool:{is_manual_retry:!0},int:{manual_retry_count:((d=u.manualRetryCount)!=null?d:0)+1},string:{previousManualRetryErrorDetails:u.previousManualRetryErrorDetails}})}r("QPLUserFlow").start(t,{annotations:c,cancelOnUnload:!0,instanceKey:n,timeoutInMs:S,timestamp:a}),o("VisibilityState").subscribe(s)}}}function Q(e,t,n){var a=e.attachmentType,i=f(!1),l=_(function(){var l=o("MAWLoggerUtils").getInstanceKey(),s=r("CurrentUser").getAppID(),u={string:{app_id:s!=null?s:void 0,attachment_type:P(a),content_type:D(a),entry_point:n,thread_type:w(t),transport_key:e.transportKey,xma_content_type:e.xmaContentType!=null?F(e.xmaContentType):void 0}};return babelHelpers.extends({},K(v,l,i,u))},[e.messageId]);return p(function(){l==null||l.start()},[l]),m(function(){return function(){i.current===!1&&(l==null?void 0:l.getInstanceKey())!=null&&(l==null||l.endCancel(706))}},[l]),l}function X(e,t,n){var r=e+(t?"0":"1")+(n?"1":"0");return o("MAWLoggerUtils").getInstanceKeyFromId(r)}function Y(e){var t=(c||(c=o("I64"))).of_float(o("ServerTime").getMillis()),n=c.to_float(c.sub(t,e))/1e3,r;return n<g?r="less_than_one_day":n<h?r="between_one_and_three_days":n<y?r="between_three_days_and_one_week":n<C?r="between_one_and_two_weeks":n<b?r="between_two_weeks_and_one_month":r="more_than_one_month",r}function J(e){return e==null||e<=0?"invalid_duration":e<=30?"duration less than 30 seconds":e<=60?"duration between 30 seconds and 1 minute":e<=120?"duration between 1 minute and 2 minutes":e<=180?"duration between 2 minutes and 3 minutes":e<=300?"duration between 3 minutes and 5 minutes":e<=600?"duration between 5 minutes and 10 minutes":e<=1800?"duration between 10 minutes and 30 minutes":e<=3600?"duration between 30 minutes and 1 hour":e<=7200?"duration between 1 hour and 2 hours":"duration above 2 hours"}l.MSGR_WEB_MEDIA_RENDER_EVENT=v,l.QPL_TIMEOUT=S,l.QPL_END_DELAY_MS=R,l.getMessageContentTypeString=k,l.getMessageContentTypeStringFromEnum=I,l.getReplyMessageAttachmentTypeStringFromEnum=T,l.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate=D,l.getAttachmentTypeString=$,l.getAttachmentTypeStringFromEnum=P,l.getThreadTypeString=M,l.getThreadTypeStringFromEnum=w,l.getXmaContentTypeStringFromEnum=F,l.getMessagingInitiationSourceStringFromEnum=B,l.getE2EELinkPreviewXMADataTypeStringFromEnum=q,l.getMessageReplySourceTypeStringFromEnum=V,l.getMessageXmaLayoutTypeStringFromEnum=G,l.getMessageReplySourceTypeV2StringFromEnum=j,l.createQplFlowCommon=K,l.useCommonMediaRenderQplForAttachment=Q,l.getThreadViewMediaRenderQplInstanceKey=X,l.calculateDiffBucketFromTimestamp=Y,l.convertDurationToStringBucket=J}),98);
__d("MWV2OneToOneThreadBlockedContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=c(!1);function p(){return d(m)}function _(e){var t=o("react-compiler-runtime").c(3),n=e.blocked,r=e.children,a=m.Provider,i;return t[0]!==n||t[1]!==r?(i=s.jsx(a,{value:n,children:r}),t[0]=n,t[1]=r,t[2]=i):i=t[2],i}l.useIsBlocked=p,l.MWV2OneToOneThreadBlockedContext=_}),98);
__d("MWXIconChevronLeft",["MWXSvgIcon","SVGIcon","cr:22266","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22266")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconDownload",["MWXSvgIcon","SVGIcon","cr:22301","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22301")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:22483","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22483")),r("gkx")("23219"));l.default=e}),98);
__d("MWXMAUtils",["I64","LSXmaContentType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video","xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function u(e){return s.has(e)}function c(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_LOCATION_SHARING||(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_LOCATION_SHARING_V2}function d(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_CONTACT||(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_AI_CONTACT}function m(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").FB_POST_MENTION}function p(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_MEMORIES_SHARE}function _(t){var n=(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero);return n===r("LSXmaContentType").RTC_AUDIO_CALL||n===r("LSXmaContentType").RTC_VIDEO_CALL||n===r("LSXmaContentType").RTC_MISSED_AUDIO_CALL||n===r("LSXmaContentType").RTC_MISSED_VIDEO_CALL||n===r("LSXmaContentType").RTC_GROUP_AUDIO_CALL||n===r("LSXmaContentType").RTC_GROUP_VIDEO_CALL||n===r("LSXmaContentType").RTC_MISSED_GROUP_AUDIO_CALL||n===r("LSXmaContentType").RTC_MISSED_GROUP_VIDEO_CALL||n===r("LSXmaContentType").RTC_ONGOING_AUDIO_CALL||n===r("LSXmaContentType").RTC_ONGOING_VIDEO_CALL}function f(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").FB_STORY_MENTION}l.isRTCXMA=u,l.isLocationShareXMA=c,l.isContactShareXMA=d,l.isXMAContentTypeFbPostMention=m,l.isXMAContentTypeMemoriesShare=p,l.isXMAContentTypeRTC=_,l.isStoryMentionXMA=f}),98);
__d("XComposerPhotoUploaderImmediate",["Promise","XComposerPhotoUploader","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s={load:function(){return(e||(e=n("Promise"))).resolve(r("XComposerPhotoUploader"))},preload:r("emptyFunction")};l.default=s}),98);
__d("acceptMAWMessageRequest",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSOptimisticAcceptMessageRequestStoredProcedure","MAWUpdateLSThreadCapabilities","Promise","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,l,u){if(!(!u||l==null)){var c=l[1],d=babelHelpers.extends({},c,{contactViewerRelationship:(s||(s=o("I64"))).of_string("2")});r("promiseDone")(t.runInTransaction(function(t){return(e||(e=n("Promise"))).all([t.contacts.upsert([c.id],d),r("LSAddMessengerContactStoredProcedure")(r("LSFactory")(t),{contactId:c.id}),o("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(t,a.threadKey),r("LSOptimisticAcceptMessageRequestStoredProcedure")(r("LSFactory")(t),{threadKey:a.threadKey})])},"readwrite",void 0,void 0,i.id+":37"))}}l.default=u}),98);
__d("shouldHideMessagingActions",["I64","LSIntEnum","isDeliveryStatusErrorState"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(256))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(65536))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(131072))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(262144))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(524288))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4294967296))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1048576))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2097152))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4194304))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(8388608))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16777216))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(67108864))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1073741824))}function c(e,t){return!!(r("isDeliveryStatusErrorState")(t)||u(e))}l.default=c}),98);
__d("useClientMediaStatus",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(6),a=(e||(e=r("useReStore")))(),l;n[0]!==t?(l=t.filter(c).map(u).join(","),n[0]=t,n[1]=l):l=n[1];var s=l,d,m;n[2]!==a.tables.client_media_status||n[3]!==s?(d=function(){if(s==="")return o("ReQL").empty();var e=s.split(",").map(function(e){return o("ReQL").fromTableAscending(a.tables.client_media_status).getKeyRange(e)});return e.length===0?o("ReQL").empty():e.length===1?e[0]:o("ReQL").union.apply(void 0,e)},m=[s,a.tables.client_media_status],n[2]=a.tables.client_media_status,n[3]=s,n[4]=d,n[5]=m):(d=n[4],m=n[5]);var p=o("ReQLSuspense").useArray(d,m,i.id+":29");return p}function u(e){var t=e.statusKey;return t}function c(e){var t=e.mediaStatus;return t==null}l.default=s}),98);
__d("useMWHasForwardAction",["I64","LSAuthorityLevel","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWMsg","MWCMIsSubthreadContext.react","MWGenAIUtils","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","MWV2OneToOneThreadBlockedContext.react","MWXMAUtils","MessagingAttachmentType","gkx","isFeatureLimitEnabled","isMWBumpMessage","mwCMIsAnyCMThread","react-compiler-runtime","shouldHideMessagingActions","useIsReadOnlyFeatureLimitedWithThreadType","useMAWMediaDownloadStatus","useMWFamilyCenterContext","useMWGetOtherUserContact","useMWIsContactRestricted"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l,u){var c=o("react-compiler-runtime").c(76),d=i===void 0?!1:i,m=u===void 0?!1:u,p=o("MWCMIsSubthreadContext.react").useIsSubthreadContext(),_=p.isSubthread,f;c[0]!==_||c[1]!==t?(f=_&&!o("LSMessagingThreadTypeUtil").isCMSubthread(t),c[0]=_,c[1]=t,c[2]=f):f=c[2];var g=f,h;c[3]!==t?(h=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(t),c[3]=t,c[4]=h):h=c[4];var y=h,C;c[5]!==n.threadKey?(C=o("MWGenAIUtils").isMetaAIThread(n.threadKey),c[5]=n.threadKey,c[6]=C):C=c[6];var b=C,v;c[7]!==t?(v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t),c[7]=t,c[8]=v):v=c[8];var S=v,R=n.ephemeralDurationInSec,L;c[9]!==R?(L=R!=null?(e||(e=o("I64"))).gt(R,(e||(e=o("I64"))).zero):!1,c[9]=R,c[10]=L):L=c[10];var E=L,k=r("useIsReadOnlyFeatureLimitedWithThreadType")(t)&&(!S||r("isFeatureLimitEnabled")()),I;c[11]!==n.displayedContentTypes?(I=(e||(e=o("I64"))).equal(n.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(4096)),c[11]=n.displayedContentTypes,c[12]=I):I=c[12];var T=I,D;c[13]!==n.displayedContentTypes?(D=(e||(e=o("I64"))).equal(n.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(134217728)),c[13]=n.displayedContentTypes,c[14]=D):D=c[14];var x=D,$=o("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),P;c[15]!==n.displayedContentTypes||c[16]!==n.sendStatusV2?(P=r("shouldHideMessagingActions")(n.displayedContentTypes,o("MWMessageDeliveryStatus").getFromSendStatus(n.sendStatusV2)),c[15]=n.displayedContentTypes,c[16]=n.sendStatusV2,c[17]=P):P=c[17];var N=P,M=r("useMWGetOtherUserContact")(n.threadKey,t,o("LSContactBitOffset").contactCapabilityFields),w=r("useMWIsContactRestricted")(M),A;c[18]!==n.sendStatusV2||c[19]!==t?(A=r("mwCMIsAnyCMThread")(t)&&(e||(e=o("I64"))).equal(n.sendStatusV2,(s||(s=o("LSIntEnum"))).ofNumber(4)),c[18]=n.sendStatusV2,c[19]=t,c[20]=A):A=c[20];var F=A,O;c[21]!==y||c[22]!==n.displayedContentTypes?(O=o("LSBitFlag").has((s||(s=o("LSIntEnum"))).ofNumber(2),n.displayedContentTypes)||y&&o("LSBitFlag").has((s||(s=o("LSIntEnum"))).ofNumber(1024),n.displayedContentTypes)&&r("gkx")("15802"),c[21]=y,c[22]=n.displayedContentTypes,c[23]=O):O=c[23];var B=O,W;c[24]!==n.replyType?(W=r("isMWBumpMessage")(n.replyType),c[24]=n.replyType,c[25]=W):W=c[25];var q=W,U=o("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),V=U.messageForwardEnabled,H=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),G=H.familyCenterData,z;c[26]!==a?(z=(a==null?void 0:a.attachmentType)!=null&&((e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE))||(e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO))),c[26]=a,c[27]=z):z=c[27];var j=z,K;c[28]!==a||c[29]!==S?(K=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isLocationShareXMA(a.xmaContentType),c[28]=a,c[29]=S,c[30]=K):K=c[30];var Q=K,X;c[31]!==a||c[32]!==S?(X=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isContactShareXMA(a.xmaContentType),c[31]=a,c[32]=S,c[33]=X):X=c[33];var Y=X,J;c[34]!==a||c[35]!==S?(J=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isXMAContentTypeFbPostMention(a.xmaContentType),c[34]=a,c[35]=S,c[36]=J):J=c[36];var Z=J,ee;c[37]!==a||c[38]!==S?(ee=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isXMAContentTypeMemoriesShare(a.xmaContentType),c[37]=a,c[38]=S,c[39]=ee):ee=c[39];var te=ee,ne;c[40]!==a?(ne=(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isStoryMentionXMA(a.xmaContentType),c[40]=a,c[41]=ne):ne=c[41];var re=ne,oe=r("useMAWMediaDownloadStatus")(a),ae=oe.uiState,ie;c[42]!==a||c[43]!==S||c[44]!==ae?(ie=a!=null&&S&&!(e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))&&ae!=="downloaded",c[42]=a,c[43]=S,c[44]=ae,c[45]=ie):ie=c[45];var le=ie,se;c[46]!==a||c[47]!==G||c[48]!==F||c[49]!==$||c[50]!==y||c[51]!==q||c[52]!==E||c[53]!==b||c[54]!==le||c[55]!==k||c[56]!==x||c[57]!==w||c[58]!==Y||c[59]!==Z||c[60]!==Q||c[61]!==te||c[62]!==S||c[63]!==T||c[64]!==g||c[65]!==j||c[66]!==re||c[67]!==l||c[68]!==n||c[69]!==V||c[70]!==N||c[71]!==d?(se=(S?!E&&(r("gkx")("18825")||!T&&!x):!0)&&!g&&!$&&!w&&!k&&!n.isUnsent&&!F&&!o("MAWMsg").isPlaceholder(n)&&!q&&V&&(!y||y&&r("gkx")("15802"))&&!d&&(e||(e=o("I64"))).gt(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))&&(a!=null&&(e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))&&(a.attachmentCta1Id!=null||a.attachmentCta2Id!=null||a.attachmentCta3Id!=null||a.defaultCtaId!=null)?a.isSharable:!0)&&(l==null||!l.hasMissingMessages&&!l.hasMissingMedia)&&!G.hasActiveMsgrFamilyCenterEnforcement&&!j&&!N&&!le&&!Q&&!Y&&!Z&&!te&&!re&&!b,c[46]=a,c[47]=G,c[48]=F,c[49]=$,c[50]=y,c[51]=q,c[52]=E,c[53]=b,c[54]=le,c[55]=k,c[56]=x,c[57]=w,c[58]=Y,c[59]=Z,c[60]=Q,c[61]=te,c[62]=S,c[63]=T,c[64]=g,c[65]=j,c[66]=re,c[67]=l,c[68]=n,c[69]=V,c[70]=N,c[71]=d,c[72]=se):se=c[72];var ue=se,ce=B&&ue&&!m,de;return c[73]!==ue||c[74]!==ce?(de={hasForwardAction:ue,shouldShowForwardAction:ce},c[73]=ue,c[74]=ce,c[75]=de):de=c[75],de}l.default=u}),98);