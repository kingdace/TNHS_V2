;/*FB_PKG_DELIM*/

__d("cometMessengerFileUploadComposerPluginSupportedTypes",[],(function(t,n,r,o,a,i){"use strict";var e=["photo","video","file"],l=e;i.default=l}),66);
__d("useCometMessengerFileUploadPaste",["react","react-compiler-runtime","useCometLexicalFileDragAndDrop"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(6),n=e.editor,a=e.handlePastedFiles,i=e.isMimeTypeAcceptable,l;t[0]!==a?(l=function(t){t.length>0&&a(t)},t[0]=a,t[1]=l):l=t[1];var s=l,u;t[2]!==n||t[3]!==i||t[4]!==s?(u={editor:n,isMimeTypeAcceptable:i,onSubmit:s},t[2]=n,t[3]=i,t[4]=s,t[5]=u):u=t[5],r("useCometLexicalFileDragAndDrop")(u)}l.default=u}),98);
__d("CometMessengerHandlePastedFileComposerPlugin",["cometIsMimeTypeForMedia","cometMessengerFileUploadComposerPluginSupportedTypes","react-compiler-runtime","useCometMessengerFileUploadPaste"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e.kind!=="file")return!1;for(var t of r("cometMessengerFileUploadComposerPluginSupportedTypes"))switch(t){case"photo":if(o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e.type))return!0;break;case"video":if(o("cometIsMimeTypeForMedia").isMimeTypeForVideo(e.type))return!0;break;case"file":if(o("cometIsMimeTypeForMedia").isMimeTypeForFile(e.type))return!0;break;default:}return!1}function s(t){var n=o("react-compiler-runtime").c(3),a=t.editor,i=t.handlePastedFiles,l;return n[0]!==a||n[1]!==i?(l={editor:a,handlePastedFiles:i,isMimeTypeAcceptable:e},n[0]=a,n[1]=i,n[2]=l):l=n[2],r("useCometMessengerFileUploadPaste")(l),null}l.default=s}),98);
__d("GroupsCometChatsEngagementLoggerWithDefaultExport",["GroupsCometChatsEngagementLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={log:o("GroupsCometChatsEngagementLogger").log};l.default=e}),98);
__d("LSDeleteMessage",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[1]]],"messageId"]),function(n){return n.messageId===e[1]&&t.i64.eq(n.threadKey,e[0])}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteMessageStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSShimThreadPinMessage.nop",["FBLogger","I64","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,a,i,l,s){if(s==null){r("FBLogger")("messenger_web_pinned_messages").warn("threadKey is null in LSShimThreadPinMessage");return}var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(n.client_web_pinned_messages).getKeyRange(s,i));await Promise.all(t.map(function(e){return n.client_web_pinned_messages.delete(e.threadKey,e.offlineThreadingId,e.pinnedTimestampMs)})),await n.client_web_pinned_messages.put({offlineThreadingId:i,pinnedTimestampMs:l!=null?l:(e||(e=o("I64"))).of_float(Date.now()),threadKey:s})};s.__nop_name__="LSShimThreadPinMessage",l.default=s}),98);
__d("LSShimThreadUnpinMessage.nop",["FBLogger","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,a,i){if(i==null){r("FBLogger")("messenger_web_pinned_messages").warn("threadKey is null in LSShimThreadUnpinMessage");return}var e=await o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.client_web_pinned_messages).getKeyRange(i,a));await Promise.all(e.map(function(e){return t.client_web_pinned_messages.delete(e.threadKey,e.offlineThreadingId,e.pinnedTimestampMs)}))};e.__nop_name__="LSShimThreadUnpinMessage",l.default=e}),98);
__d("LSSetOrUnsetPinnedMessage",["LSShimThreadPinMessage.nop","LSShimThreadUnpinMessage.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.i64.eq(e[2],t.i64.cast([0,1]))||t.i64.eq(e[2],t.i64.cast([0,2]))?t.nativeOperation(n("LSShimThreadPinMessage.nop"),e[0],e[1],e[3]):t.nativeOperation(n("LSShimThreadUnpinMessage.nop"),e[0],e[3])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxSetOrUnsetPinnedMessageStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSetPinnedMessage",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[0].set("message_id",e[1]),r[0].set("pinned_message_state",e[3]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"set_pinned_message_search",t.i64.cast([0,751]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(n){return t.i64.eq(e[3],t.i64.cast([0,1]))?t.sequence([function(n){return t.forEach(t.db.table(205).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})},function(n){return t.forEach(t.filter(t.db.table(205).fetch([[[e[0],e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]&&t.i64.eq(n.pinnedTimestampMs,e[2])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,80]))}),function(e){return e.delete()})},function(n){return t.db.table(205).add({threadKey:e[0],messageId:e[1],pinnedTimestampMs:e[2],authorityLevel:t.i64.cast([0,80])})}]):t.forEach(t.db.table(205).fetch([[[e[0],e[1]]]]),function(e){return e.delete()})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxSetPinnedMessageStoredProcedure",e.__tables__=["msg_pinned_messages_v2"],a.exports=e}),null);
__d("MWChatMessageBothOrientationFocusGroup.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusGroup.react","emptyFunction","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=o("FocusGroup.react").createFocusGroup(o("focusScopeQueries").tabbableScopeQuery),d=c[0],m=c[1],p={key:r("CometKeys").UP},_={key:r("CometKeys").DOWN},f={key:r("CometKeys").LEFT},g={key:r("CometKeys").RIGHT},h=[{command:p,description:s._(/*BTDS*/"Previous item"),handler:r("emptyFunction")},{command:_,description:s._(/*BTDS*/"Next item"),handler:r("emptyFunction")},{command:f,description:s._(/*BTDS*/"Next item"),handler:r("emptyFunction")},{command:g,description:s._(/*BTDS*/"Previous item"),handler:r("emptyFunction")}];function y(e){var t=o("react-compiler-runtime").c(2),n=e.children,a;return t[0]!==n?(a=u.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:h,xstyle:!1,children:n}),t[0]=n,t[1]=a):a=t[1],a}var C=y;l.FocusGroup=d,l.FocusGroupItem=m,l.keyCommands=C}),226);
__d("MWOpenMediaManagerUtils",["fbt","I64","LSFactory","LSGenerateTraceId","LSIntEnum","LSMarkSubJobCompletedV2StoredProcedure","MWConsole","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","ReQL","cr:6057","emptyFunction","promiseDone"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e){return n("cr:6057").preload(),Promise.all(e.map(function(e){var t=e[0],n=e[1];if(t.type==="application/zip")return Promise.reject("invalid file type");var r={file:t,offlineAttachmentId:n};return Promise.resolve(r)}))}function d(t,n,a,l,u,c,d,p,_,f,g){u===void 0&&(u=r("emptyFunction")),c===void 0&&(c=r("emptyFunction")),d===void 0&&(d=r("emptyFunction"));var h=function(n,a){var e=a.event;if(e.lengthComputable){var l=e.loaded/e.total;r("promiseDone")(t.runInTransaction(function(e){return o("MWPOpenComposerUtils").updateMediaStaging(e,n,function(e){return babelHelpers.extends({},e,{progress:l})})},"readwrite",void 0,void 0,i.id+":85"))}},y=function(p,_){if(_==null||_.length===0){var u="";r("promiseDone")(t.runInTransaction(function(e){return o("MWPOpenComposerUtils").deleteMediaStaging(e,p).then(function(){return m(e,p)}).then(function(){var e=a.find(function(e){return e.offlineAttachmentId===p});e!=null&&e.file.type==="application/zip"?(l(s._(/*BTDS*/"_j[\"Invalid file format\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]"),s._(/*BTDS*/"The file you have selected is not a valid format.")),u="null_fbid_invalid_file_format"):(l(s._(/*BTDS*/"Upload failed")),u="null_fbid_other")})},"readwrite",void 0,void 0,i.id+":103"),function(){return d(u,p)});return}r("promiseDone")(t.runInTransaction(function(t){var a=o("MWPOpenComposerUtils").updateMediaStaging(t,p,function(t){return babelHelpers.extends({},t,{fbid:(e||(e=o("I64"))).of_string(_),progress:1})}),i=t.media_send_jobs.get(p).then(function(a){if(a==null)return Promise.resolve();var i=r("LSFactory")(t),l=a.offlineThreadingId,s=a.offlineAttachmentId;return r("LSMarkSubJobCompletedV2StoredProcedure")(i,{fbid:(e||(e=o("I64"))).of_string(_),offlineAttachmentId:p}).then(function(){return o("MWPOpenComposerUtils").deleteMediaStaging(t,p)}).then(function(){return o("MWPOpenComposerUtils").updateAttachment(t,n,l,s,function(e){return babelHelpers.extends({},e,{attachmentFbid:_.toString()})})}).then(function(){return o("MWPOpenComposerUtils").resumeSendJob(i,l,r("LSGenerateTraceId")())})});return Promise.all([a,i])},"readwrite",void 0,void 0,i.id+":142"),function(){return c(p)})},C=function(n,a){r("promiseDone")(t.runInTransaction(function(e){return o("MWPOpenComposerUtils").updateMediaStaging(e,n,function(e){return babelHelpers.extends({},e,{hasError:!0})}).then(function(){return m(e,n)})},"readwrite",void 0,void 0,i.id+":195"),function(){var e;d((e=a.response.getErrorDescriptionString())!=null?e:"unknown_upload_failure",n)})},b=a.map(function(e){return e.offlineAttachmentId}),v=a.map(function(e){return e.file});return o("MWPComposerMediaUploadUtil").startUpload(u,h,y,C,void 0,v,b,p,_,void 0,f,g)}async function m(e,t){var n=await e.media_send_jobs.get(t);if(n!=null){var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages.index("optimistic")).getKeyRange(n.offlineThreadingId));if(r!=null){var a=babelHelpers.extends({},r,{sendStatusV2:(u||(u=o("LSIntEnum"))).ofNumber(4)});await e.messages.put(a)}}}l.preprocess=c,l.upload=d}),226);
__d("MessageRequestsBulkActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("256"),s=o("FalcoLoggerInternal").create("message_requests_bulk_action_confirmed",e),u=s;l.default=u}),98);
__d("MessageRequestsBulkActionEditFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2614"),s=o("FalcoLoggerInternal").create("message_requests_bulk_action_edit",e),u=s;l.default=u}),98);
__d("MessageRequestsBulkActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("257"),s=o("FalcoLoggerInternal").create("message_requests_bulk_action_tapped",e),u=s;l.default=u}),98);
__d("MessageRequestsInfoBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("258"),s=o("FalcoLoggerInternal").create("message_requests_info_banner_shown",e),u=s;l.default=u}),98);
__d("MessageRequestsThreadActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("259"),s=o("FalcoLoggerInternal").create("message_requests_thread_action_confirmed",e),u=s;l.default=u}),98);
__d("MessageRequestsThreadActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("260"),s=o("FalcoLoggerInternal").create("message_requests_thread_action_tapped",e),u=s;l.default=u}),98);
__d("MessageRequestsThreadDenialOptionsTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("261"),s=o("FalcoLoggerInternal").create("message_requests_thread_denial_options_tapped",e),u=s;l.default=u}),98);
__d("MessageRequestsViewThreadlistFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("263"),s=o("FalcoLoggerInternal").create("message_requests_view_threadlist",e),u=s;l.default=u}),98);