;/*FB_PKG_DELIM*/

__d("MessengerDeprecationUtils",["fbt","DateConsts","FBLogger","MAWCurrentUser","MWChatEncryptedBackupsQPLSource.enum","MWEBWebOnboardingPostDecisionDialog.entrypoint","MessengerMSplitFlag","Promise","WebAsyncStorage","formatDate","gkx","isMessengerPWA","justknobx","promiseDone","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=c.useCallback,m=c.useEffect,p=c.useMemo,_=c.useState,f="messenger_pwa_deprecation",g=function(){try{var e=new URLSearchParams(document.location.search).get("deprecation_date_internal_only"),t=r("justknobx")._("4035"),n=r("justknobx")._("5072"),a=t;(o("MAWCurrentUser").isEmployee()||o("MAWCurrentUser").isTestUser())&&Date.now()<=n&&(a=n),a=e!=null?e:a;var i=new Date(a);return r("formatDate")(i,"F j, Y"),i.getTime()}catch(e){return 17648064e5}},h=function(){return r("gkx")("18733")||r("isMessengerPWA")()&&r("gkx")("18178")},y=function(){var e=new Date(g()).getTime(),t=Date.now();return e-t<=o("DateConsts").MS_PER_DAY*60};function C(e){var t=o("react-compiler-runtime").c(20),n=e.closeDialog,a=e.isQP,i=e.userHasEncryptedBackup,l=a===void 0?!1:a,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u={},t[0]=u):u=t[0];var c=r("useMWXEntryPointDialog")(r("MWEBWebOnboardingPostDecisionDialog.entrypoint"),u),d=c[0],m=c[1],p=c[2],_=c[3],f,g;t[1]!==l?(g=r("MessengerMSplitFlag").is_msplit_account?s._(/*BTDS*/"Go to web"):l?s._(/*BTDS*/"Go to FB app"):s._(/*BTDS*/"Go to Facebook app"),t[1]=l,t[2]=g):g=t[2];var h;t[3]===Symbol.for("react.memo_cache_sentinel")?(h={url:r("MessengerMSplitFlag").is_msplit_account?"https://www.messenger.com/":"https://apps.microsoft.com/detail/9wzdncrfj2wl"},t[3]=h):h=t[3];var y;t[4]!==g?(y={label:g,linkProps:h},t[4]=g,t[5]=y):y=t[5];var C=y,b;t[6]===Symbol.for("react.memo_cache_sentinel")?(b={label:s._(/*BTDS*/"Learn more"),linkProps:{url:"https://www.facebook.com/help/messenger-app/804132271957789"}},t[6]=b):b=t[6];var v=b;if(!i){var S;t[7]===Symbol.for("react.memo_cache_sentinel")?(S=s._(/*BTDS*/"Create PIN"),t[7]=S):S=t[7];var R;t[8]!==n||t[9]!==l||t[10]!==d?(R=function(){n(),d({source:l?r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK})},t[8]=n,t[9]=l,t[10]=d,t[11]=R):R=t[11];var L;t[12]!==m||t[13]!==p||t[14]!==_||t[15]!==R?(L={label:S,onHoverIn:m,onHoverOut:p,onPress:R,onPressIn:_},t[12]=m,t[13]=p,t[14]=_,t[15]=R,t[16]=L):L=t[16],C=L,v=void 0}var E;return t[17]!==C||t[18]!==v?(E={primaryCallToAction:C,secondaryCallToAction:v},t[17]=C,t[18]=v,t[19]=E):E=t[19],f=E,f}function b(){var e=o("react-compiler-runtime").c(5),t=_(!1),n=t[0],a=t[1],i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){a(!1),S({qpDimissalTimestamp:Date.now()})},e[0]=i):i=e[0];var l=i,s,u;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=function(){h()&&y()&&r("promiseDone")(R(),function(e){var t=e==null?void 0:e.qpDimissalTimestamp;(t==null||Date.now()-t>=o("DateConsts").MS_PER_WEEK)&&a(!0)})},u=[],e[1]=s,e[2]=u):(s=e[1],u=e[2]),m(s,u);var c;return e[3]!==n?(c={onClose:l,showMessengerDeprecationQP:n},e[3]=n,e[4]=c):c=e[4],c}function v(){var e=o("react-compiler-runtime").c(5),t=_(!1),n=t[0],a=t[1],i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){a(!1),S({softblockDismissalTimestamp:Date.now()})},e[0]=i):i=e[0];var l=i,s,u;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=function(){var e=new Date(g()).getTime(),t=Date.now();e<=t||r("promiseDone")(R(),function(n){for(var r of[3,7,14])if(e-t<=o("DateConsts").MS_PER_DAY*r){r===3?((n==null?void 0:n.softblockDismissalTimestamp)==null||t-n.softblockDismissalTimestamp>=o("DateConsts").MS_PER_DAY)&&a(!0):((n==null?void 0:n.softblockDismissalTimestamp)==null||e-n.softblockDismissalTimestamp>=o("DateConsts").MS_PER_DAY*r)&&a(!0);break}})},u=[],e[1]=s,e[2]=u):(s=e[1],u=e[2]),m(s,u);var c;return e[3]!==n?(c={onClose:l,showMessengerDeprecationSoftBlock:n},e[3]=n,e[4]=c):c=e[4],c}var S=function(t){r("WebAsyncStorage").upsertAndSaveAtomic(f,function(e){return babelHelpers.extends({},e,t)},function(e,t){if(e!=null){r("FBLogger")("messenger_web_entrypoints").catching(e);return}})},R=function(){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").getItem(f,function(n,o){if(n!=null)return r("FBLogger")("messenger_web_entrypoints").catching(n),t(n);e(o)})})};l.getDeprecationDateTs=g,l.isMsgrDeprecationEnabled=h,l.hasCountDownStarted=y,l.useDeprecationDialogContent=C,l.useShowMessengerDeprecationQP=b,l.useShowMessengerDeprecationSoftBlock=v,l.setMetadata=S,l.getMetadata=R}),226);
__d("MessengerDeprecationQP.react",["fbt","ix","MWXQPCard.react","MessengerDeprecationUtils","MessengerMSplitFlag","formatDate","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(12),n=e.closeDialog,a=e.encryptedBackup,i=a!=null,l;t[0]!==n||t[1]!==i?(l={closeDialog:n,isQP:!0,userHasEncryptedBackup:i},t[0]=n,t[1]=i,t[2]=l):l=t[2];var d=o("MessengerDeprecationUtils").useDeprecationDialogContent(l),m=d.primaryCallToAction,p=d.secondaryCallToAction,_;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"_j{\"web\":\"Messenger desktop app will no longer be available after {month}. You can continue your conversations on the web.\",\"FB app\":\"Messenger desktop app will no longer be available after {month}. You can continue your conversations on the FB app.\"}",[s._enum(r("MessengerMSplitFlag").is_msplit_account?"web":"FB app",{web:"web","FB app":"FB app"}),s._param("month",r("formatDate")(new Date(o("MessengerDeprecationUtils").getDeprecationDateTs()),"F j, Y"))]),t[3]=_):_=t[3];var f=_;if(!i){var g;t[4]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"_j{\"web\":\"Messenger desktop app will no longer be available after {month}, and you can instead use the web. You need to create a PIN to avoid losing chat history.\",\"FB app\":\"Messenger desktop app will no longer be available after {month}, and you can instead use the FB app. You need to create a PIN to avoid losing chat history.\"}",[s._enum(r("MessengerMSplitFlag").is_msplit_account?"web":"FB app",{web:"web","FB app":"FB app"}),s._param("month",r("formatDate")(new Date(o("MessengerDeprecationUtils").getDeprecationDateTs()),"F j, Y"))]),t[4]=g):g=t[4],f=g}var h=f,y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Messenger desktop app is going away"),t[5]=y):y=t[5];var C;t[6]===Symbol.for("react.memo_cache_sentinel")?(C={props:{isDecorative:!0,src:u("909982")},type:"image"},t[6]=C):C=t[6];var b;return t[7]!==n||t[8]!==f||t[9]!==m||t[10]!==p?(b=c.jsx(r("MWXQPCard.react"),{addOnPrimary:m,addOnSecondary:p,body:h,headline:y,icon:C,onClose:n}),t[7]=n,t[8]=f,t[9]=m,t[10]=p,t[11]=b):b=t[11],b}l.default=d}),226);